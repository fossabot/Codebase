{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/ext/test/promise/limit.js"],"sourcesContent":["\"use strict\";\n\nvar assert = require(\"chai\").assert\n  , wait   = require(\"timers-ext/promise/sleep\")\n  , limit  = require(\"../../promise/limit\").bind(Promise);\n\ndescribe(\"promise/limit\", function () {\n\tit(\"Should limit executions\", function () {\n\t\tvar count = 0;\n\t\tvar callCount = 0;\n\t\tvar limited = limit(2, function (arg1) {\n\t\t\tvar id = ++count;\n\t\t\tassert.equal(arg1, \"foo\");\n\t\t\tassert.equal(arguments[1], id);\n\t\t\treturn wait(10).then(function () { return id; });\n\t\t});\n\t\tlimited(\"foo\", ++callCount);\n\t\tassert.equal(count, 1);\n\t\tlimited(\"foo\", ++callCount);\n\t\tassert.equal(count, 2);\n\t\tlimited(\"foo\", ++callCount);\n\t\tassert.equal(count, 2);\n\t\tlimited(\"foo\", ++callCount);\n\t\tassert.equal(count, 2);\n\t\treturn wait(25).then(function () {\n\t\t\tassert.equal(count, 4);\n\t\t\tlimited(\"foo\", ++callCount);\n\t\t\tassert.equal(count, 5);\n\t\t\tlimited(\"foo\", ++callCount);\n\t\t\tassert.equal(count, 6);\n\t\t\tlimited(\"foo\", ++callCount);\n\t\t\tassert.equal(count, 6);\n\t\t\treturn wait(25).then(function () { assert.equal(count, 7); });\n\t\t});\n\t});\n\n\tit(\"Should resolve with expected result\", function () {\n\t\tvar count = 0;\n\t\tvar limited = limit(2, function () {\n\t\t\tvar id = ++count;\n\t\t\treturn wait(10).then(function () { return id; });\n\t\t});\n\t\tlimited();\n\t\tassert.equal(count, 1);\n\t\tlimited();\n\t\tassert.equal(count, 2);\n\t\treturn limited().then(function (result) {\n\t\t\tassert.equal(result, 3);\n\t\t\tlimited().then(function (result) { assert.equal(result, 4); });\n\t\t});\n\t});\n});\n"],"names":["assert","require","wait","limit","bind","Promise","describe","it","count","callCount","limited","arg1","id","equal","arguments","then","result"],"mappings":"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"}