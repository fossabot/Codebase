{"version":3,"sources":["../../../../../../../../../../libs/movie/data-access/node_modules/@supabase/realtime-js/dist/module/lib/serializer.js"],"sourcesContent":["// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map"],"names":["Serializer","decode","rawPayload","callback","constructor","ArrayBuffer","_binaryDecode","JSON","parse","buffer","view","DataView","decoder","TextDecoder","_decodeBroadcast","topicSize","getUint8","eventSize","offset","HEADER_LENGTH","topic","slice","event","data","byteLength","ref","payload"],"mappings":";;AAEe,GAAK,CAACA,UAAU,SAAVA,UAAU;IAI3BC,MAAM,CAACC,UAAU,EAAEC,QAAQ,EAAE,CAAC;QAC1B,EAAE,EAAED,UAAU,CAACE,WAAW,KAAKC,WAAW,EAAE,CAAC;YACzC,MAAM,CAACF,QAAQ,CAAC,IAAI,CAACG,aAAa,CAACJ,UAAU;QACjD,CAAC;QACD,EAAE,EAAE,MAAM,CAACA,UAAU,KAAK,CAAQ,SAAE,CAAC;YACjC,MAAM,CAACC,QAAQ,CAACI,IAAI,CAACC,KAAK,CAACN,UAAU;QACzC,CAAC;QACD,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAC;IACtB,CAAC;IACDG,aAAa,CAACG,MAAM,EAAE,CAAC;QACnB,KAAK,CAACC,IAAI,GAAG,GAAG,CAACC,QAAQ,CAACF,MAAM;QAChC,KAAK,CAACG,OAAO,GAAG,GAAG,CAACC,WAAW;QAC/B,MAAM,CAAC,IAAI,CAACC,gBAAgB,CAACL,MAAM,EAAEC,IAAI,EAAEE,OAAO;IACtD,CAAC;IACDE,gBAAgB,CAACL,MAAM,EAAEC,IAAI,EAAEE,OAAO,EAAE,CAAC;QACrC,KAAK,CAACG,SAAS,GAAGL,IAAI,CAACM,QAAQ,CAAC,CAAC;QACjC,KAAK,CAACC,SAAS,GAAGP,IAAI,CAACM,QAAQ,CAAC,CAAC;QACjC,GAAG,CAACE,MAAM,GAAG,IAAI,CAACC,aAAa,GAAG,CAAC;QACnC,KAAK,CAACC,KAAK,GAAGR,OAAO,CAACX,MAAM,CAACQ,MAAM,CAACY,KAAK,CAACH,MAAM,EAAEA,MAAM,GAAGH,SAAS;QACpEG,MAAM,GAAGA,MAAM,GAAGH,SAAS;QAC3B,KAAK,CAACO,KAAK,GAAGV,OAAO,CAACX,MAAM,CAACQ,MAAM,CAACY,KAAK,CAACH,MAAM,EAAEA,MAAM,GAAGD,SAAS;QACpEC,MAAM,GAAGA,MAAM,GAAGD,SAAS;QAC3B,KAAK,CAACM,IAAI,GAAGhB,IAAI,CAACC,KAAK,CAACI,OAAO,CAACX,MAAM,CAACQ,MAAM,CAACY,KAAK,CAACH,MAAM,EAAET,MAAM,CAACe,UAAU;QAC7E,MAAM,CAAC,CAAC;YAACC,GAAG,EAAE,IAAI;YAAEL,KAAK,EAAEA,KAAK;YAAEE,KAAK,EAAEA,KAAK;YAAEI,OAAO,EAAEH,IAAI;QAAC,CAAC;IACnE,CAAC;iBA3Ba,CAAC;QACX,IAAI,CAACJ,aAAa,GAAG,CAAC;IAC1B,CAAC;CA2BL,CAAsC,AAAtC,EAAsC,AAAtC,oCAAsC;;kBA9BjBnB,UAAU"}