{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/storage-js/src/lib/fetch.ts"],"sourcesContent":["import crossFetch from 'cross-fetch'\n\nexport type Fetch = typeof fetch\n\nexport interface FetchOptions {\n  headers?: {\n    [key: string]: string\n  }\n  noResolveJson?: boolean\n}\n\nexport interface FetchParameters {\n  signal?: AbortSignal\n}\n\nexport type RequestMethodType = 'GET' | 'POST' | 'PUT' | 'DELETE'\n\nconst _getErrorMessage = (err: any): string =>\n  err.msg || err.message || err.error_description || err.error || JSON.stringify(err)\n\nconst handleError = (error: any, reject: any) => {\n  if (typeof error.json !== 'function') {\n    return reject(error)\n  }\n  error.json().then((err: any) => {\n    return reject({\n      message: _getErrorMessage(err),\n      status: error?.status || 500,\n    })\n  })\n}\n\nconst _getRequestParams = (\n  method: RequestMethodType,\n  options?: FetchOptions,\n  parameters?: FetchParameters,\n  body?: object\n) => {\n  const params: { [k: string]: any } = { method, headers: options?.headers || {} }\n\n  if (method === 'GET') {\n    return params\n  }\n\n  params.headers = { 'Content-Type': 'application/json', ...options?.headers }\n  params.body = JSON.stringify(body)\n  return { ...params, ...parameters }\n}\n\nasync function _handleRequest(\n  fetcher: Fetch = crossFetch,\n  method: RequestMethodType,\n  url: string,\n  options?: FetchOptions,\n  parameters?: FetchParameters,\n  body?: object\n): Promise<any> {\n  return new Promise((resolve, reject) => {\n    fetcher(url, _getRequestParams(method, options, parameters, body))\n      .then((result) => {\n        if (!result.ok) throw result\n        if (options?.noResolveJson) return resolve(result)\n        return result.json()\n      })\n      .then((data) => resolve(data))\n      .catch((error) => handleError(error, reject))\n  })\n}\n\nexport async function get(\n  fetcher: Fetch | undefined,\n  url: string,\n  options?: FetchOptions,\n  parameters?: FetchParameters\n): Promise<any> {\n  return _handleRequest(fetcher, 'GET', url, options, parameters)\n}\n\nexport async function post(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions,\n  parameters?: FetchParameters\n): Promise<any> {\n  return _handleRequest(fetcher, 'POST', url, options, parameters, body)\n}\n\nexport async function put(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions,\n  parameters?: FetchParameters\n): Promise<any> {\n  return _handleRequest(fetcher, 'PUT', url, options, parameters, body)\n}\n\nexport async function remove(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions,\n  parameters?: FetchParameters\n): Promise<any> {\n  return _handleRequest(fetcher, 'DELETE', url, options, parameters, body)\n}\n"],"names":["get","post","put","remove","_getErrorMessage","err","msg","message","error_description","error","JSON","stringify","handleError","reject","json","then","status","_getRequestParams","method","options","parameters","body","params","headers","_handleRequest","fetcher","crossFetch","url","Promise","resolve","result","ok","noResolveJson","data","catch"],"mappings":"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"}