{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/storage-js/src/lib/StorageBucketApi.ts"],"sourcesContent":["import { Fetch, get, post, put, remove } from './fetch'\nimport { Bucket } from './types'\nimport { DEFAULT_HEADERS } from './constants'\n\nexport class StorageBucketApi {\n  protected url: string\n  protected headers: { [key: string]: string }\n  protected fetch?: Fetch\n\n  constructor(url: string, headers: { [key: string]: string } = {}, fetch?: Fetch) {\n    this.url = url\n    this.headers = { ...DEFAULT_HEADERS, ...headers }\n    this.fetch = fetch\n  }\n\n  /**\n   * Retrieves the details of all Storage buckets within an existing product.\n   */\n  async listBuckets(): Promise<{ data: Bucket[] | null; error: Error | null }> {\n    try {\n      const data = await get(this.fetch, `${this.url}/bucket`, { headers: this.headers })\n      return { data, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n\n  /**\n   * Retrieves the details of an existing Storage bucket.\n   *\n   * @param id The unique identifier of the bucket you would like to retrieve.\n   */\n  async getBucket(id: string): Promise<{ data: Bucket | null; error: Error | null }> {\n    try {\n      const data = await get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers })\n      return { data, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n\n  /**\n   * Creates a new Storage bucket\n   *\n   * @param id A unique identifier for the bucket you are creating.\n   * @returns newly created bucket id\n   */\n  async createBucket(\n    id: string,\n    options: { public: boolean } = { public: false }\n  ): Promise<{ data: string | null; error: Error | null }> {\n    try {\n      const data = await post(\n        this.fetch,\n        `${this.url}/bucket`,\n        { id, name: id, public: options.public },\n        { headers: this.headers }\n      )\n      return { data: data.name, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n\n  /**\n   * Updates a new Storage bucket\n   *\n   * @param id A unique identifier for the bucket you are creating.\n   */\n  async updateBucket(\n    id: string,\n    options: { public: boolean }\n  ): Promise<{ data: { message: string } | null; error: Error | null }> {\n    try {\n      const data = await put(\n        this.fetch,\n        `${this.url}/bucket/${id}`,\n        { id, name: id, public: options.public },\n        { headers: this.headers }\n      )\n      return { data, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n\n  /**\n   * Removes all objects inside a single bucket.\n   *\n   * @param id The unique identifier of the bucket you would like to empty.\n   */\n  async emptyBucket(\n    id: string\n  ): Promise<{ data: { message: string } | null; error: Error | null }> {\n    try {\n      const data = await post(\n        this.fetch,\n        `${this.url}/bucket/${id}/empty`,\n        {},\n        { headers: this.headers }\n      )\n      return { data, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n\n  /**\n   * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n   * You must first `empty()` the bucket.\n   *\n   * @param id The unique identifier of the bucket you would like to delete.\n   */\n  async deleteBucket(\n    id: string\n  ): Promise<{ data: { message: string } | null; error: Error | null }> {\n    try {\n      const data = await remove(\n        this.fetch,\n        `${this.url}/bucket/${id}`,\n        {},\n        { headers: this.headers }\n      )\n      return { data, error: null }\n    } catch (error) {\n      return { data: null, error }\n    }\n  }\n}\n"],"names":["StorageBucketApi","listBuckets","data","get","fetch","url","headers","error","getBucket","id","createBucket","options","public","post","name","updateBucket","put","emptyBucket","deleteBucket","remove","DEFAULT_HEADERS"],"mappings":"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"}