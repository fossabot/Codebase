{"version":3,"sources":["../../../../../../../../../../libs/movie/data-access/node_modules/@supabase/storage-js/dist/module/lib/StorageFileApi.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { get, post, remove } from './fetch';\nimport fetch from 'cross-fetch';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = fetch;\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    // const data = await res.json()\n                    // temporary fix till backend is updated to the latest storage-api version\n                    return { data: { Key: _path }, error: null };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file, optionally renaming it at the same time.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Create signed url to download file without requiring permissions. This URL can be valid for a set number of seconds.\n     *\n     * @param path The file path to be downloaded, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     */\n    createSignedUrl(path, expiresIn) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, { expiresIn }, { headers: this.headers });\n                const signedURL = `${this.url}${data.signedURL}`;\n                data = { signedURL };\n                return { data, error: null, signedURL };\n            }\n            catch (error) {\n                return { data: null, error, signedURL: null };\n            }\n        });\n    }\n    /**\n     * Downloads a file.\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    download(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Retrieve URLs for assets in public buckets\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    getPublicUrl(path) {\n        try {\n            const _path = this._getFinalPath(path);\n            const publicURL = `${this.url}/object/public/${_path}`;\n            const data = { publicURL };\n            return { data, error: null, publicURL };\n        }\n        catch (error) {\n            return { data: null, error, publicURL: null };\n        }\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to be deleted, including the path and file name. For example [`folder/image.png`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(id: string): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await get(`${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await post(`${this.url}/metadata/${id}`, { ...meta }, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     * @param options Search options, including `limit`, `offset`, and `sortBy`.\n     * @param parameters Fetch parameters, currently only supports `signal`, which is an AbortController's signal\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","DEFAULT_SEARCH_OPTIONS","limit","offset","sortBy","column","order","DEFAULT_FILE_OPTIONS","cacheControl","contentType","upsert","StorageFileApi","uploadOrUpdate","method","path","fileBody","fileOptions","body","options","Object","assign","headers","String","Blob","FormData","append","cleanPath","_removeEmptyFolders","_path","_getFinalPath","res","fetch","url","ok","data","Key","error","json","upload","update","move","fromPath","toPath","post","bucketId","sourceKey","destinationKey","createSignedUrl","expiresIn","signedURL","download","get","noResolveJson","blob","getPublicUrl","publicURL","remove","paths","prefixes","list","parameters","prefix","replace"],"mappings":"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"}