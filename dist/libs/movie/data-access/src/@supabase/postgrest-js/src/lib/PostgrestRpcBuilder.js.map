{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/postgrest-js/src/lib/PostgrestRpcBuilder.ts"],"sourcesContent":["import { Fetch, PostgrestBuilder } from './types'\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder'\n\nexport default class PostgrestRpcBuilder<T> extends PostgrestBuilder<T> {\n  constructor(\n    url: string,\n    {\n      headers = {},\n      schema,\n      fetch,\n    }: { headers?: { [key: string]: string }; schema?: string; fetch?: Fetch } = {}\n  ) {\n    super(({ fetch } as unknown) as PostgrestBuilder<T>)\n    this.url = new URL(url)\n    this.headers = { ...headers }\n    this.schema = schema\n  }\n\n  /**\n   * Perform a function call.\n   */\n  rpc(\n    params?: object,\n    {\n      head = false,\n      count = null,\n    }: {\n      head?: boolean\n      count?: null | 'exact' | 'planned' | 'estimated'\n    } = {}\n  ): PostgrestFilterBuilder<T> {\n    if (head) {\n      this.method = 'HEAD'\n\n      if (params) {\n        Object.entries(params).forEach(([name, value]) => {\n          this.url.searchParams.append(name, value)\n        })\n      }\n    } else {\n      this.method = 'POST'\n      this.body = params\n    }\n\n    if (count) {\n      if (this.headers['Prefer'] !== undefined) this.headers['Prefer'] += `,count=${count}`\n      else this.headers['Prefer'] = `count=${count}`\n    }\n\n    return new PostgrestFilterBuilder(this)\n  }\n}\n"],"names":["PostgrestRpcBuilder","PostgrestBuilder","rpc","params","head","count","method","Object","entries","forEach","name","value","url","searchParams","append","body","headers","undefined","PostgrestFilterBuilder","schema","fetch","URL"],"mappings":";;;AAAwC,GAAS,CAAT,MAAS;AACd,GAA0B,CAA1B,uBAA0B;AAE9C,GAAK,CAACA,mBAAmB,SAAnBA,mBAAmB,SAAYC,MAAgB;IAelE,EAEG,AAFH;;GAEG,AAFH,EAEG,CACHC,GAAG,CACDC,MAAe,EACf,CAAC,CACCC,IAAI,EAAG,KAAK,GACZC,KAAK,EAAG,IAAI,EAId,CAAC,GAAG,CAAC,CAAC,EACqB,CAAC;QAC5B,EAAE,EAAED,IAAI,EAAE,CAAC;YACT,IAAI,CAACE,MAAM,GAAG,CAAM;YAEpB,EAAE,EAAEH,MAAM,EAAE,CAAC;gBACXI,MAAM,CAACC,OAAO,CAACL,MAAM,EAAEM,OAAO,GAAGC,IAAI,EAAEC,KAAK,IAAM,CAAC;oBACjD,IAAI,CAACC,GAAG,CAACC,YAAY,CAACC,MAAM,CAACJ,IAAI,EAAEC,KAAK;gBAC1C,CAAC;YACH,CAAC;QACH,CAAC,MAAM,CAAC;YACN,IAAI,CAACL,MAAM,GAAG,CAAM;YACpB,IAAI,CAACS,IAAI,GAAGZ,MAAM;QACpB,CAAC;QAED,EAAE,EAAEE,KAAK,EAAE,CAAC;YACV,EAAE,EAAE,IAAI,CAACW,OAAO,CAAC,CAAQ,aAAMC,SAAS,EAAE,IAAI,CAACD,OAAO,CAAC,CAAQ,aAAM,OAAO,EAAEX,KAAK;iBAC9E,IAAI,CAACW,OAAO,CAAC,CAAQ,YAAK,MAAM,EAAEX,KAAK;QAC9C,CAAC;QAED,MAAM,CAAC,GAAG,CAACa,uBAAsB,SAAC,IAAI;IACxC,CAAC;gBA7CCN,GAAW,EACX,CAAC,CACCI,OAAO,EAAG,CAAC,CAAC,GACZG,MAAM,GACNC,KAAK,EACkE,CAAC,GAAG,CAAC,CAAC,CAC/E,CAAC;QACD,KAAK,CAAE,CAAC;YAACA,KAAK;QAAC,CAAC;QAChB,IAAI,CAACR,GAAG,GAAG,GAAG,CAACS,GAAG,CAACT,GAAG;QACtB,IAAI,CAACI,OAAO,0BAAQA,OAAO;QAC3B,IAAI,CAACG,MAAM,GAAGA,MAAM;IACtB,CAAC;;kBAbkBnB,mBAAmB"}