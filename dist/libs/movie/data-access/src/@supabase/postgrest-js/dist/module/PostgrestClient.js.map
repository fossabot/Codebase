{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js"],"sourcesContent":["import PostgrestQueryBuilder from './lib/PostgrestQueryBuilder';\nimport PostgrestRpcBuilder from './lib/PostgrestRpcBuilder';\nimport { DEFAULT_HEADERS } from './lib/constants';\nexport default class PostgrestClient {\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url  URL of the PostgREST endpoint.\n     * @param headers  Custom headers.\n     * @param schema  Postgres schema to switch to.\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Authenticates the request with JWT.\n     *\n     * @param token  The JWT token to use.\n     */\n    auth(token) {\n        this.headers['Authorization'] = `Bearer ${token}`;\n        return this;\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table  The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.url}/${table}`;\n        return new PostgrestQueryBuilder(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     * @param head  When set to true, no data will be returned.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    rpc(fn, params, { head = false, count = null, } = {}) {\n        const url = `${this.url}/rpc/${fn}`;\n        return new PostgrestRpcBuilder(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n        }).rpc(params, { head, count });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map"],"names":["PostgrestClient","auth","token","headers","from","table","url","PostgrestQueryBuilder","schema","fetch","rpc","fn","params","head","count","PostgrestRpcBuilder","Object","assign","DEFAULT_HEADERS"],"mappings":";;AAAkC,GAA6B,CAA7B,sBAA6B;AAC/B,GAA2B,CAA3B,oBAA2B;AAC3B,GAAiB,CAAjB,UAAiB;AAClC,GAAK,CAACA,eAAe,SAAfA,eAAe;IAchC,EAIG,AAJH;;;;KAIG,AAJH,EAIG,CACHC,IAAI,CAACC,KAAK,EAAE,CAAC;QACT,IAAI,CAACC,OAAO,CAAC,CAAe,mBAAK,OAAO,EAAED,KAAK;QAC/C,MAAM,CAAC,IAAI;IACf,CAAC;IACD,EAIG,AAJH;;;;KAIG,AAJH,EAIG,CACHE,IAAI,CAACC,KAAK,EAAE,CAAC;QACT,KAAK,CAACC,GAAG,MAAM,IAAI,CAACA,GAAG,CAAC,CAAC,EAAED,KAAK;QAChC,MAAM,CAAC,GAAG,CAACE,sBAAqB,SAACD,GAAG,EAAE,CAAC;YACnCH,OAAO,EAAE,IAAI,CAACA,OAAO;YACrBK,MAAM,EAAE,IAAI,CAACA,MAAM;YACnBC,KAAK,EAAE,IAAI,CAACA,KAAK;QACrB,CAAC;IACL,CAAC;IACD,EAOG,AAPH;;;;;;;KAOG,AAPH,EAOG,CACHC,GAAG,CAACC,EAAE,EAAEC,MAAM,EAAE,CAAC,CAACC,IAAI,EAAG,KAAK,GAAEC,KAAK,EAAG,IAAI,IAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;QACnD,KAAK,CAACR,GAAG,MAAM,IAAI,CAACA,GAAG,CAAC,KAAK,EAAEK,EAAE;QACjC,MAAM,CAAC,GAAG,CAACI,oBAAmB,SAACT,GAAG,EAAE,CAAC;YACjCH,OAAO,EAAE,IAAI,CAACA,OAAO;YACrBK,MAAM,EAAE,IAAI,CAACA,MAAM;YACnBC,KAAK,EAAE,IAAI,CAACA,KAAK;QACrB,CAAC,EAAEC,GAAG,CAACE,MAAM,EAAE,CAAC;YAACC,IAAI;YAAEC,KAAK;QAAC,CAAC;IAClC,CAAC;IAlDD,EAMG,AANH;;;;;;KAMG,AANH,EAMG,aACSR,GAAG,EAAE,CAAC,CAACH,OAAO,EAAG,CAAC,CAAC,GAAEK,MAAM,GAAEC,KAAK,IAAE,CAAC,GAAG,CAAC,CAAC,CAAE,CAAC;QACrD,IAAI,CAACH,GAAG,GAAGA,GAAG;QACd,IAAI,CAACH,OAAO,GAAGa,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,UAAe,mBAAGf,OAAO;QACxE,IAAI,CAACK,MAAM,GAAGA,MAAM;QACpB,IAAI,CAACC,KAAK,GAAGA,KAAK;IACtB,CAAC;CAwCL,CAA2C,AAA3C,EAA2C,AAA3C,yCAA2C;;kBArDtBT,eAAe"}