{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/postgrest-js/dist/main/PostgrestClient.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PostgrestQueryBuilder_1 = __importDefault(require(\"./lib/PostgrestQueryBuilder\"));\nconst PostgrestRpcBuilder_1 = __importDefault(require(\"./lib/PostgrestRpcBuilder\"));\nconst constants_1 = require(\"./lib/constants\");\nclass PostgrestClient {\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url  URL of the PostgREST endpoint.\n     * @param headers  Custom headers.\n     * @param schema  Postgres schema to switch to.\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, constants_1.DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Authenticates the request with JWT.\n     *\n     * @param token  The JWT token to use.\n     */\n    auth(token) {\n        this.headers['Authorization'] = `Bearer ${token}`;\n        return this;\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table  The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.url}/${table}`;\n        return new PostgrestQueryBuilder_1.default(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     * @param head  When set to true, no data will be returned.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    rpc(fn, params, { head = false, count = null, } = {}) {\n        const url = `${this.url}/rpc/${fn}`;\n        return new PostgrestRpcBuilder_1.default(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n        }).rpc(params, { head, count });\n    }\n}\nexports.default = PostgrestClient;\n//# sourceMappingURL=PostgrestClient.js.map"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","PostgrestQueryBuilder_1","require","PostgrestRpcBuilder_1","constants_1","PostgrestClient","auth","token","headers","from","table","url","default","schema","fetch","rpc","fn","params","head","count","assign","DEFAULT_HEADERS"],"mappings":"AAAA,CAAY;AACZ,GAAG,CAACA,eAAe,IAAI,IAAI,CAAJ,CAAI,MAAI,IAAI,CAAJ,CAAI,EAACA,eAAe,IAAK,QAAQ,CAAEC,GAAG,EAAE,CAAC;IACpE,MAAM,CAAEA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG,CAAC;QAAC,CAAS,UAAEA,GAAG;IAAC,CAAC;AAC7D,CAAC;AACDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,CAAY,aAAE,CAAC;IAACC,KAAK,EAAE,IAAI;AAAC,CAAC;AAC5D,KAAK,CAACC,uBAAuB,GAAGP,eAAe,CAACQ,OAAO,CAAC,CAA6B;AACrF,KAAK,CAACC,qBAAqB,GAAGT,eAAe,CAACQ,OAAO,CAAC,CAA2B;AACjF,KAAK,CAACE,WAAW,GAAGF,OAAO,CAAC,CAAiB;AAC7C,GAAK,CAACG,eAAe,SAAfA,eAAe;IAcjB,EAIG,AAJH;;;;KAIG,AAJH,EAIG,CACHC,IAAI,CAACC,KAAK,EAAE,CAAC;QACT,IAAI,CAACC,OAAO,CAAC,CAAe,mBAAK,OAAO,EAAED,KAAK;QAC/C,MAAM,CAAC,IAAI;IACf,CAAC;IACD,EAIG,AAJH;;;;KAIG,AAJH,EAIG,CACHE,IAAI,CAACC,KAAK,EAAE,CAAC;QACT,KAAK,CAACC,GAAG,MAAM,IAAI,CAACA,GAAG,CAAC,CAAC,EAAED,KAAK;QAChC,MAAM,CAAC,GAAG,CAACT,uBAAuB,CAACW,OAAO,CAACD,GAAG,EAAE,CAAC;YAC7CH,OAAO,EAAE,IAAI,CAACA,OAAO;YACrBK,MAAM,EAAE,IAAI,CAACA,MAAM;YACnBC,KAAK,EAAE,IAAI,CAACA,KAAK;QACrB,CAAC;IACL,CAAC;IACD,EAOG,AAPH;;;;;;;KAOG,AAPH,EAOG,CACHC,GAAG,CAACC,EAAE,EAAEC,MAAM,EAAE,CAAC,CAACC,IAAI,EAAG,KAAK,GAAEC,KAAK,EAAG,IAAI,IAAE,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;QACnD,KAAK,CAACR,GAAG,MAAM,IAAI,CAACA,GAAG,CAAC,KAAK,EAAEK,EAAE;QACjC,MAAM,CAAC,GAAG,CAACb,qBAAqB,CAACS,OAAO,CAACD,GAAG,EAAE,CAAC;YAC3CH,OAAO,EAAE,IAAI,CAACA,OAAO;YACrBK,MAAM,EAAE,IAAI,CAACA,MAAM;YACnBC,KAAK,EAAE,IAAI,CAACA,KAAK;QACrB,CAAC,EAAEC,GAAG,CAACE,MAAM,EAAE,CAAC;YAACC,IAAI;YAAEC,KAAK;QAAC,CAAC;IAClC,CAAC;IAlDD,EAMG,AANH;;;;;;KAMG,AANH,EAMG,aACSR,GAAG,EAAE,CAAC,CAACH,OAAO,EAAG,CAAC,CAAC,GAAEK,MAAM,GAAEC,KAAK,IAAE,CAAC,GAAG,CAAC,CAAC,CAAE,CAAC;QACrD,IAAI,CAACH,GAAG,GAAGA,GAAG;QACd,IAAI,CAACH,OAAO,GAAGX,MAAM,CAACuB,MAAM,CAACvB,MAAM,CAACuB,MAAM,CAAC,CAAC,CAAC,EAAEhB,WAAW,CAACiB,eAAe,GAAGb,OAAO;QACpF,IAAI,CAACK,MAAM,GAAGA,MAAM;QACpB,IAAI,CAACC,KAAK,GAAGA,KAAK;IACtB,CAAC;;AAwCLf,OAAO,CAACa,OAAO,GAAGP,eAAe,CACjC,CAA2C,AAA3C,EAA2C,AAA3C,yCAA2C"}