{"version":3,"sources":["../../../../../../../../../../libs/movie/data-access/node_modules/@supabase/gotrue-js/dist/module/lib/cookies.js"],"sourcesContent":["/**\n * Serialize data into a cookie header.\n */\nfunction serialize(name, val, options) {\n    const opt = options || {};\n    const enc = encodeURIComponent;\n    /* eslint-disable-next-line no-control-regex */\n    const fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n    if (typeof enc !== 'function') {\n        throw new TypeError('option encode is invalid');\n    }\n    if (!fieldContentRegExp.test(name)) {\n        throw new TypeError('argument name is invalid');\n    }\n    const value = enc(val);\n    if (value && !fieldContentRegExp.test(value)) {\n        throw new TypeError('argument val is invalid');\n    }\n    let str = name + '=' + value;\n    if (null != opt.maxAge) {\n        const maxAge = opt.maxAge - 0;\n        if (isNaN(maxAge) || !isFinite(maxAge)) {\n            throw new TypeError('option maxAge is invalid');\n        }\n        str += '; Max-Age=' + Math.floor(maxAge);\n    }\n    if (opt.domain) {\n        if (!fieldContentRegExp.test(opt.domain)) {\n            throw new TypeError('option domain is invalid');\n        }\n        str += '; Domain=' + opt.domain;\n    }\n    if (opt.path) {\n        if (!fieldContentRegExp.test(opt.path)) {\n            throw new TypeError('option path is invalid');\n        }\n        str += '; Path=' + opt.path;\n    }\n    if (opt.expires) {\n        if (typeof opt.expires.toUTCString !== 'function') {\n            throw new TypeError('option expires is invalid');\n        }\n        str += '; Expires=' + opt.expires.toUTCString();\n    }\n    if (opt.httpOnly) {\n        str += '; HttpOnly';\n    }\n    if (opt.secure) {\n        str += '; Secure';\n    }\n    if (opt.sameSite) {\n        const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n        switch (sameSite) {\n            case 'lax':\n                str += '; SameSite=Lax';\n                break;\n            case 'strict':\n                str += '; SameSite=Strict';\n                break;\n            case 'none':\n                str += '; SameSite=None';\n                break;\n            default:\n                throw new TypeError('option sameSite is invalid');\n        }\n    }\n    return str;\n}\n/**\n * Based on the environment and the request we know if a secure cookie can be set.\n */\nfunction isSecureEnvironment(req) {\n    if (!req || !req.headers || !req.headers.host) {\n        throw new Error('The \"host\" request header is not available');\n    }\n    const host = (req.headers.host.indexOf(':') > -1 && req.headers.host.split(':')[0]) || req.headers.host;\n    if (['localhost', '127.0.0.1'].indexOf(host) > -1 || host.endsWith('.local')) {\n        return false;\n    }\n    return true;\n}\n/**\n * Serialize a cookie to a string.\n */\nfunction serializeCookie(cookie, secure) {\n    var _a, _b, _c;\n    return serialize(cookie.name, cookie.value, {\n        maxAge: cookie.maxAge,\n        expires: new Date(Date.now() + cookie.maxAge * 1000),\n        httpOnly: true,\n        secure,\n        path: (_a = cookie.path) !== null && _a !== void 0 ? _a : '/',\n        domain: (_b = cookie.domain) !== null && _b !== void 0 ? _b : '',\n        sameSite: (_c = cookie.sameSite) !== null && _c !== void 0 ? _c : 'lax',\n    });\n}\n/**\n * Get Cookie Header strings.\n */\nexport function getCookieString(req, res, cookies) {\n    const strCookies = cookies.map((c) => serializeCookie(c, isSecureEnvironment(req)));\n    const previousCookies = res.getHeader('Set-Cookie');\n    if (previousCookies) {\n        if (previousCookies instanceof Array) {\n            Array.prototype.push.apply(strCookies, previousCookies);\n        }\n        else if (typeof previousCookies === 'string') {\n            strCookies.push(previousCookies);\n        }\n    }\n    return strCookies;\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookies(req, res, cookies) {\n    res.setHeader('Set-Cookie', getCookieString(req, res, cookies));\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookie(req, res, cookie) {\n    setCookies(req, res, [cookie]);\n}\nexport function deleteCookie(req, res, name) {\n    setCookie(req, res, {\n        name,\n        value: '',\n        maxAge: -1,\n    });\n}\n//# sourceMappingURL=cookies.js.map"],"names":["getCookieString","setCookies","setCookie","deleteCookie","serialize","name","val","options","opt","enc","encodeURIComponent","fieldContentRegExp","TypeError","test","value","str","maxAge","isNaN","isFinite","Math","floor","domain","path","expires","toUTCString","httpOnly","secure","sameSite","toLowerCase","isSecureEnvironment","req","headers","host","Error","indexOf","split","endsWith","serializeCookie","cookie","_a","_b","_c","Date","now","res","cookies","strCookies","map","c","previousCookies","getHeader","Array","prototype","push","apply","setHeader"],"mappings":"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"}