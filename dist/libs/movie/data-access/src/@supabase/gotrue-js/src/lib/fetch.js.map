{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/@supabase/gotrue-js/src/lib/fetch.ts"],"sourcesContent":["import crossFetch from 'cross-fetch'\n\nexport type Fetch = typeof fetch\n\nexport interface FetchOptions {\n  headers?: {\n    [key: string]: string\n  }\n  noResolveJson?: boolean\n}\n\nexport type RequestMethodType = 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'\n\nconst _getErrorMessage = (err: any): string =>\n  err.msg || err.message || err.error_description || err.error || JSON.stringify(err)\n\nconst handleError = (error: any, reject: any) => {\n  if (typeof error.json !== 'function') {\n    return reject(error)\n  }\n  error.json().then((err: any) => {\n    return reject({\n      message: _getErrorMessage(err),\n      status: error?.status || 500,\n    })\n  })\n}\n\nconst _getRequestParams = (method: RequestMethodType, options?: FetchOptions, body?: object) => {\n  const params: { [k: string]: any } = { method, headers: options?.headers || {} }\n\n  if (method === 'GET') {\n    return params\n  }\n\n  params.headers = { 'Content-Type': 'text/plain;charset=UTF-8', ...options?.headers }\n  params.body = JSON.stringify(body)\n\n  return params\n}\n\nasync function _handleRequest(\n  fetcher: Fetch = crossFetch,\n  method: RequestMethodType,\n  url: string,\n  options?: FetchOptions,\n  body?: object\n): Promise<any> {\n  return new Promise((resolve, reject) => {\n    fetcher(url, _getRequestParams(method, options, body))\n      .then((result) => {\n        if (!result.ok) throw result\n        if (options?.noResolveJson) return resolve\n        return result.json()\n      })\n      .then((data) => resolve(data))\n      .catch((error) => handleError(error, reject))\n  })\n}\n\nexport async function get(\n  fetcher: Fetch | undefined,\n  url: string,\n  options?: FetchOptions\n): Promise<any> {\n  return _handleRequest(fetcher, 'GET', url, options)\n}\n\nexport async function post(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions\n): Promise<any> {\n  return _handleRequest(fetcher, 'POST', url, options, body)\n}\n\nexport async function put(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions\n): Promise<any> {\n  return _handleRequest(fetcher, 'PUT', url, options, body)\n}\n\nexport async function remove(\n  fetcher: Fetch | undefined,\n  url: string,\n  body: object,\n  options?: FetchOptions\n): Promise<any> {\n  return _handleRequest(fetcher, 'DELETE', url, options, body)\n}\n"],"names":["get","post","put","remove","_getErrorMessage","err","msg","message","error_description","error","JSON","stringify","handleError","reject","json","then","status","_getRequestParams","method","options","body","params","headers","_handleRequest","fetcher","crossFetch","url","Promise","resolve","result","ok","noResolveJson","data","catch"],"mappings":"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"}