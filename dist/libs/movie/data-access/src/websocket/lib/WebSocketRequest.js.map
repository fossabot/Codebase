{"version":3,"sources":["../../../../../../../libs/movie/data-access/node_modules/websocket/lib/WebSocketRequest.js"],"sourcesContent":["/************************************************************************\n *  Copyright 2010-2015 Brian McKelvey.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n ***********************************************************************/\n\nvar crypto = require('crypto');\nvar util = require('util');\nvar url = require('url');\nvar EventEmitter = require('events').EventEmitter;\nvar WebSocketConnection = require('./WebSocketConnection');\n\nvar headerValueSplitRegExp = /,\\s*/;\nvar headerParamSplitRegExp = /;\\s*/;\nvar headerSanitizeRegExp = /[\\r\\n]/g;\nvar xForwardedForSeparatorRegExp = /,\\s*/;\nvar separators = [\n    '(', ')', '<', '>', '@',\n    ',', ';', ':', '\\\\', '\\\"',\n    '/', '[', ']', '?', '=',\n    '{', '}', ' ', String.fromCharCode(9)\n];\nvar controlChars = [String.fromCharCode(127) /* DEL */];\nfor (var i=0; i < 31; i ++) {\n    /* US-ASCII Control Characters */\n    controlChars.push(String.fromCharCode(i));\n}\n\nvar cookieNameValidateRegEx = /([\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2f\\x3a-\\x3f\\x40\\x5b-\\x5e\\x7b\\x7d\\x7f])/;\nvar cookieValueValidateRegEx = /[^\\x21\\x23-\\x2b\\x2d-\\x3a\\x3c-\\x5b\\x5d-\\x7e]/;\nvar cookieValueDQuoteValidateRegEx = /^\"[^\"]*\"$/;\nvar controlCharsAndSemicolonRegEx = /[\\x00-\\x20\\x3b]/g;\n\nvar cookieSeparatorRegEx = /[;,] */;\n\nvar httpStatusDescriptions = {\n    100: 'Continue',\n    101: 'Switching Protocols',\n    200: 'OK',\n    201: 'Created',\n    203: 'Non-Authoritative Information',\n    204: 'No Content',\n    205: 'Reset Content',\n    206: 'Partial Content',\n    300: 'Multiple Choices',\n    301: 'Moved Permanently',\n    302: 'Found',\n    303: 'See Other',\n    304: 'Not Modified',\n    305: 'Use Proxy',\n    307: 'Temporary Redirect',\n    400: 'Bad Request',\n    401: 'Unauthorized',\n    402: 'Payment Required',\n    403: 'Forbidden',\n    404: 'Not Found',\n    406: 'Not Acceptable',\n    407: 'Proxy Authorization Required',\n    408: 'Request Timeout',\n    409: 'Conflict',\n    410: 'Gone',\n    411: 'Length Required',\n    412: 'Precondition Failed',\n    413: 'Request Entity Too Long',\n    414: 'Request-URI Too Long',\n    415: 'Unsupported Media Type',\n    416: 'Requested Range Not Satisfiable',\n    417: 'Expectation Failed',\n    426: 'Upgrade Required',\n    500: 'Internal Server Error',\n    501: 'Not Implemented',\n    502: 'Bad Gateway',\n    503: 'Service Unavailable',\n    504: 'Gateway Timeout',\n    505: 'HTTP Version Not Supported'\n};\n\nfunction WebSocketRequest(socket, httpRequest, serverConfig) {\n    // Superclass Constructor\n    EventEmitter.call(this);\n\n    this.socket = socket;\n    this.httpRequest = httpRequest;\n    this.resource = httpRequest.url;\n    this.remoteAddress = socket.remoteAddress;\n    this.remoteAddresses = [this.remoteAddress];\n    this.serverConfig = serverConfig;\n\n    // Watch for the underlying TCP socket closing before we call accept\n    this._socketIsClosing = false;\n    this._socketCloseHandler = this._handleSocketCloseBeforeAccept.bind(this);\n    this.socket.on('end', this._socketCloseHandler);\n    this.socket.on('close', this._socketCloseHandler);\n\n    this._resolved = false;\n}\n\nutil.inherits(WebSocketRequest, EventEmitter);\n\nWebSocketRequest.prototype.readHandshake = function() {\n    var self = this;\n    var request = this.httpRequest;\n\n    // Decode URL\n    this.resourceURL = url.parse(this.resource, true);\n\n    this.host = request.headers['host'];\n    if (!this.host) {\n        throw new Error('Client must provide a Host header.');\n    }\n\n    this.key = request.headers['sec-websocket-key'];\n    if (!this.key) {\n        throw new Error('Client must provide a value for Sec-WebSocket-Key.');\n    }\n\n    this.webSocketVersion = parseInt(request.headers['sec-websocket-version'], 10);\n\n    if (!this.webSocketVersion || isNaN(this.webSocketVersion)) {\n        throw new Error('Client must provide a value for Sec-WebSocket-Version.');\n    }\n\n    switch (this.webSocketVersion) {\n        case 8:\n        case 13:\n            break;\n        default:\n            var e = new Error('Unsupported websocket client version: ' + this.webSocketVersion +\n                              'Only versions 8 and 13 are supported.');\n            e.httpCode = 426;\n            e.headers = {\n                'Sec-WebSocket-Version': '13'\n            };\n            throw e;\n    }\n\n    if (this.webSocketVersion === 13) {\n        this.origin = request.headers['origin'];\n    }\n    else if (this.webSocketVersion === 8) {\n        this.origin = request.headers['sec-websocket-origin'];\n    }\n\n    // Protocol is optional.\n    var protocolString = request.headers['sec-websocket-protocol'];\n    this.protocolFullCaseMap = {};\n    this.requestedProtocols = [];\n    if (protocolString) {\n        var requestedProtocolsFullCase = protocolString.split(headerValueSplitRegExp);\n        requestedProtocolsFullCase.forEach(function(protocol) {\n            var lcProtocol = protocol.toLocaleLowerCase();\n            self.requestedProtocols.push(lcProtocol);\n            self.protocolFullCaseMap[lcProtocol] = protocol;\n        });\n    }\n\n    if (!this.serverConfig.ignoreXForwardedFor &&\n        request.headers['x-forwarded-for']) {\n        var immediatePeerIP = this.remoteAddress;\n        this.remoteAddresses = request.headers['x-forwarded-for']\n            .split(xForwardedForSeparatorRegExp);\n        this.remoteAddresses.push(immediatePeerIP);\n        this.remoteAddress = this.remoteAddresses[0];\n    }\n\n    // Extensions are optional.\n    if (this.serverConfig.parseExtensions) {\n        var extensionsString = request.headers['sec-websocket-extensions'];\n        this.requestedExtensions = this.parseExtensions(extensionsString);\n    } else {\n        this.requestedExtensions = [];\n    }\n\n    // Cookies are optional\n    if (this.serverConfig.parseCookies) {\n        var cookieString = request.headers['cookie'];\n        this.cookies = this.parseCookies(cookieString);\n    } else {\n        this.cookies = [];\n    }\n};\n\nWebSocketRequest.prototype.parseExtensions = function(extensionsString) {\n    if (!extensionsString || extensionsString.length === 0) {\n        return [];\n    }\n    var extensions = extensionsString.toLocaleLowerCase().split(headerValueSplitRegExp);\n    extensions.forEach(function(extension, index, array) {\n        var params = extension.split(headerParamSplitRegExp);\n        var extensionName = params[0];\n        var extensionParams = params.slice(1);\n        extensionParams.forEach(function(rawParam, index, array) {\n            var arr = rawParam.split('=');\n            var obj = {\n                name: arr[0],\n                value: arr[1]\n            };\n            array.splice(index, 1, obj);\n        });\n        var obj = {\n            name: extensionName,\n            params: extensionParams\n        };\n        array.splice(index, 1, obj);\n    });\n    return extensions;\n};\n\n// This function adapted from node-cookie\n// https://github.com/shtylman/node-cookie\nWebSocketRequest.prototype.parseCookies = function(str) {\n    // Sanity Check\n    if (!str || typeof(str) !== 'string') {\n        return [];\n    }\n\n    var cookies = [];\n    var pairs = str.split(cookieSeparatorRegEx);\n\n    pairs.forEach(function(pair) {\n        var eq_idx = pair.indexOf('=');\n        if (eq_idx === -1) {\n            cookies.push({\n                name: pair,\n                value: null\n            });\n            return;\n        }\n\n        var key = pair.substr(0, eq_idx).trim();\n        var val = pair.substr(++eq_idx, pair.length).trim();\n\n        // quoted values\n        if ('\"' === val[0]) {\n            val = val.slice(1, -1);\n        }\n\n        cookies.push({\n            name: key,\n            value: decodeURIComponent(val)\n        });\n    });\n\n    return cookies;\n};\n\nWebSocketRequest.prototype.accept = function(acceptedProtocol, allowedOrigin, cookies) {\n    this._verifyResolution();\n\n    // TODO: Handle extensions\n\n    var protocolFullCase;\n\n    if (acceptedProtocol) {\n        protocolFullCase = this.protocolFullCaseMap[acceptedProtocol.toLocaleLowerCase()];\n        if (typeof(protocolFullCase) === 'undefined') {\n            protocolFullCase = acceptedProtocol;\n        }\n    }\n    else {\n        protocolFullCase = acceptedProtocol;\n    }\n    this.protocolFullCaseMap = null;\n\n    // Create key validation hash\n    var sha1 = crypto.createHash('sha1');\n    sha1.update(this.key + '258EAFA5-E914-47DA-95CA-C5AB0DC85B11');\n    var acceptKey = sha1.digest('base64');\n\n    var response = 'HTTP/1.1 101 Switching Protocols\\r\\n' +\n                   'Upgrade: websocket\\r\\n' +\n                   'Connection: Upgrade\\r\\n' +\n                   'Sec-WebSocket-Accept: ' + acceptKey + '\\r\\n';\n\n    if (protocolFullCase) {\n        // validate protocol\n        for (var i=0; i < protocolFullCase.length; i++) {\n            var charCode = protocolFullCase.charCodeAt(i);\n            var character = protocolFullCase.charAt(i);\n            if (charCode < 0x21 || charCode > 0x7E || separators.indexOf(character) !== -1) {\n                this.reject(500);\n                throw new Error('Illegal character \"' + String.fromCharCode(character) + '\" in subprotocol.');\n            }\n        }\n        if (this.requestedProtocols.indexOf(acceptedProtocol) === -1) {\n            this.reject(500);\n            throw new Error('Specified protocol was not requested by the client.');\n        }\n\n        protocolFullCase = protocolFullCase.replace(headerSanitizeRegExp, '');\n        response += 'Sec-WebSocket-Protocol: ' + protocolFullCase + '\\r\\n';\n    }\n    this.requestedProtocols = null;\n\n    if (allowedOrigin) {\n        allowedOrigin = allowedOrigin.replace(headerSanitizeRegExp, '');\n        if (this.webSocketVersion === 13) {\n            response += 'Origin: ' + allowedOrigin + '\\r\\n';\n        }\n        else if (this.webSocketVersion === 8) {\n            response += 'Sec-WebSocket-Origin: ' + allowedOrigin + '\\r\\n';\n        }\n    }\n\n    if (cookies) {\n        if (!Array.isArray(cookies)) {\n            this.reject(500);\n            throw new Error('Value supplied for \"cookies\" argument must be an array.');\n        }\n        var seenCookies = {};\n        cookies.forEach(function(cookie) {\n            if (!cookie.name || !cookie.value) {\n                this.reject(500);\n                throw new Error('Each cookie to set must at least provide a \"name\" and \"value\"');\n            }\n\n            // Make sure there are no \\r\\n sequences inserted\n            cookie.name = cookie.name.replace(controlCharsAndSemicolonRegEx, '');\n            cookie.value = cookie.value.replace(controlCharsAndSemicolonRegEx, '');\n\n            if (seenCookies[cookie.name]) {\n                this.reject(500);\n                throw new Error('You may not specify the same cookie name twice.');\n            }\n            seenCookies[cookie.name] = true;\n\n            // token (RFC 2616, Section 2.2)\n            var invalidChar = cookie.name.match(cookieNameValidateRegEx);\n            if (invalidChar) {\n                this.reject(500);\n                throw new Error('Illegal character ' + invalidChar[0] + ' in cookie name');\n            }\n\n            // RFC 6265, Section 4.1.1\n            // *cookie-octet / ( DQUOTE *cookie-octet DQUOTE ) | %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E\n            if (cookie.value.match(cookieValueDQuoteValidateRegEx)) {\n                invalidChar = cookie.value.slice(1, -1).match(cookieValueValidateRegEx);\n            } else {\n                invalidChar = cookie.value.match(cookieValueValidateRegEx);\n            }\n            if (invalidChar) {\n                this.reject(500);\n                throw new Error('Illegal character ' + invalidChar[0] + ' in cookie value');\n            }\n\n            var cookieParts = [cookie.name + '=' + cookie.value];\n\n            // RFC 6265, Section 4.1.1\n            // 'Path=' path-value | <any CHAR except CTLs or ';'>\n            if(cookie.path){\n                invalidChar = cookie.path.match(controlCharsAndSemicolonRegEx);\n                if (invalidChar) {\n                    this.reject(500);\n                    throw new Error('Illegal character ' + invalidChar[0] + ' in cookie path');\n                }\n                cookieParts.push('Path=' + cookie.path);\n            }\n\n            // RFC 6265, Section 4.1.2.3\n            // 'Domain=' subdomain\n            if (cookie.domain) {\n                if (typeof(cookie.domain) !== 'string') {\n                    this.reject(500);\n                    throw new Error('Domain must be specified and must be a string.');\n                }\n                invalidChar = cookie.domain.match(controlCharsAndSemicolonRegEx);\n                if (invalidChar) {\n                    this.reject(500);\n                    throw new Error('Illegal character ' + invalidChar[0] + ' in cookie domain');\n                }\n                cookieParts.push('Domain=' + cookie.domain.toLowerCase());\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Expires=' sane-cookie-date | Force Date object requirement by using only epoch\n            if (cookie.expires) {\n                if (!(cookie.expires instanceof Date)){\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"expires\" must be a vaild date object');\n                }\n                cookieParts.push('Expires=' + cookie.expires.toGMTString());\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Max-Age=' non-zero-digit *DIGIT\n            if (cookie.maxage) {\n                var maxage = cookie.maxage;\n                if (typeof(maxage) === 'string') {\n                    maxage = parseInt(maxage, 10);\n                }\n                if (isNaN(maxage) || maxage <= 0 ) {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"maxage\" must be a non-zero number');\n                }\n                maxage = Math.round(maxage);\n                cookieParts.push('Max-Age=' + maxage.toString(10));\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'Secure;'\n            if (cookie.secure) {\n                if (typeof(cookie.secure) !== 'boolean') {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"secure\" must be of type boolean');\n                }\n                cookieParts.push('Secure');\n            }\n\n            // RFC 6265, Section 4.1.1\n            //'HttpOnly;'\n            if (cookie.httponly) {\n                if (typeof(cookie.httponly) !== 'boolean') {\n                    this.reject(500);\n                    throw new Error('Value supplied for cookie \"httponly\" must be of type boolean');\n                }\n                cookieParts.push('HttpOnly');\n            }\n\n            response += ('Set-Cookie: ' + cookieParts.join(';') + '\\r\\n');\n        }.bind(this));\n    }\n\n    // TODO: handle negotiated extensions\n    // if (negotiatedExtensions) {\n    //     response += 'Sec-WebSocket-Extensions: ' + negotiatedExtensions.join(', ') + '\\r\\n';\n    // }\n\n    // Mark the request resolved now so that the user can't call accept or\n    // reject a second time.\n    this._resolved = true;\n    this.emit('requestResolved', this);\n\n    response += '\\r\\n';\n\n    var connection = new WebSocketConnection(this.socket, [], acceptedProtocol, false, this.serverConfig);\n    connection.webSocketVersion = this.webSocketVersion;\n    connection.remoteAddress = this.remoteAddress;\n    connection.remoteAddresses = this.remoteAddresses;\n\n    var self = this;\n\n    if (this._socketIsClosing) {\n        // Handle case when the client hangs up before we get a chance to\n        // accept the connection and send our side of the opening handshake.\n        cleanupFailedConnection(connection);\n    }\n    else {\n        this.socket.write(response, 'ascii', function(error) {\n            if (error) {\n                cleanupFailedConnection(connection);\n                return;\n            }\n\n            self._removeSocketCloseListeners();\n            connection._addSocketEventListeners();\n        });\n    }\n\n    this.emit('requestAccepted', connection);\n    return connection;\n};\n\nWebSocketRequest.prototype.reject = function(status, reason, extraHeaders) {\n    this._verifyResolution();\n\n    // Mark the request resolved now so that the user can't call accept or\n    // reject a second time.\n    this._resolved = true;\n    this.emit('requestResolved', this);\n\n    if (typeof(status) !== 'number') {\n        status = 403;\n    }\n    var response = 'HTTP/1.1 ' + status + ' ' + httpStatusDescriptions[status] + '\\r\\n' +\n                   'Connection: close\\r\\n';\n    if (reason) {\n        reason = reason.replace(headerSanitizeRegExp, '');\n        response += 'X-WebSocket-Reject-Reason: ' + reason + '\\r\\n';\n    }\n\n    if (extraHeaders) {\n        for (var key in extraHeaders) {\n            var sanitizedValue = extraHeaders[key].toString().replace(headerSanitizeRegExp, '');\n            var sanitizedKey = key.replace(headerSanitizeRegExp, '');\n            response += (sanitizedKey + ': ' + sanitizedValue + '\\r\\n');\n        }\n    }\n\n    response += '\\r\\n';\n    this.socket.end(response, 'ascii');\n\n    this.emit('requestRejected', this);\n};\n\nWebSocketRequest.prototype._handleSocketCloseBeforeAccept = function() {\n    this._socketIsClosing = true;\n    this._removeSocketCloseListeners();\n};\n\nWebSocketRequest.prototype._removeSocketCloseListeners = function() {\n    this.socket.removeListener('end', this._socketCloseHandler);\n    this.socket.removeListener('close', this._socketCloseHandler);\n};\n\nWebSocketRequest.prototype._verifyResolution = function() {\n    if (this._resolved) {\n        throw new Error('WebSocketRequest may only be accepted or rejected one time.');\n    }\n};\n\nfunction cleanupFailedConnection(connection) {\n    // Since we have to return a connection object even if the socket is\n    // already dead in order not to break the API, we schedule a 'close'\n    // event on the connection object to occur immediately.\n    process.nextTick(function() {\n        // WebSocketConnection.CLOSE_REASON_ABNORMAL = 1006\n        // Third param: Skip sending the close frame to a dead socket\n        connection.drop(1006, 'TCP connection lost before handshake completed.', true);\n    });\n}\n\nmodule.exports = WebSocketRequest;\n"],"names":["crypto","require","util","url","EventEmitter","WebSocketConnection","headerValueSplitRegExp","headerParamSplitRegExp","headerSanitizeRegExp","xForwardedForSeparatorRegExp","separators","String","fromCharCode","controlChars","i","push","cookieNameValidateRegEx","cookieValueValidateRegEx","cookieValueDQuoteValidateRegEx","controlCharsAndSemicolonRegEx","cookieSeparatorRegEx","httpStatusDescriptions","WebSocketRequest","socket","httpRequest","serverConfig","call","resource","remoteAddress","remoteAddresses","_socketIsClosing","_socketCloseHandler","_handleSocketCloseBeforeAccept","bind","on","_resolved","inherits","prototype","readHandshake","self","request","resourceURL","parse","host","headers","Error","key","webSocketVersion","parseInt","isNaN","e","httpCode","origin","protocolString","protocolFullCaseMap","requestedProtocols","requestedProtocolsFullCase","split","forEach","protocol","lcProtocol","toLocaleLowerCase","ignoreXForwardedFor","immediatePeerIP","parseExtensions","extensionsString","requestedExtensions","parseCookies","cookieString","cookies","length","extensions","extension","index","array","params","extensionName","extensionParams","slice","rawParam","arr","obj","name","value","splice","str","pairs","pair","eq_idx","indexOf","substr","trim","val","decodeURIComponent","accept","acceptedProtocol","allowedOrigin","_verifyResolution","protocolFullCase","sha1","createHash","update","acceptKey","digest","response","charCode","charCodeAt","character","charAt","reject","replace","Array","isArray","seenCookies","cookie","invalidChar","match","cookieParts","path","domain","toLowerCase","expires","Date","toGMTString","maxage","Math","round","toString","secure","httponly","join","emit","connection","cleanupFailedConnection","write","error","_removeSocketCloseListeners","_addSocketEventListeners","status","reason","extraHeaders","sanitizedValue","sanitizedKey","end","removeListener","process","nextTick","drop","module","exports"],"mappings":"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"}