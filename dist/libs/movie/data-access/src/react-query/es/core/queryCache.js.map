{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/es/core/queryCache.js"],"sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { hashQueryKeyByOptions, matchQuery, parseFilterArgs } from './utils';\nimport { Query } from './query';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable';\n// CLASS\nexport var QueryCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueryCache, _Subscribable);\n\n  function QueryCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n\n  var _proto = QueryCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var _options$queryHash;\n\n    var queryKey = options.queryKey;\n    var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : hashQueryKeyByOptions(queryKey, options);\n    var query = this.get(queryHash);\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        options: client.defaultQueryOptions(options),\n        state: state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n        meta: options.meta\n      });\n      this.add(query);\n    }\n\n    return query;\n  };\n\n  _proto.add = function add(query) {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query;\n      this.queries.push(query);\n      this.notify({\n        type: 'queryAdded',\n        query: query\n      });\n    }\n  };\n\n  _proto.remove = function remove(query) {\n    var queryInMap = this.queriesMap[query.queryHash];\n\n    if (queryInMap) {\n      query.destroy();\n      this.queries = this.queries.filter(function (x) {\n        return x !== query;\n      });\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash];\n      }\n\n      this.notify({\n        type: 'queryRemoved',\n        query: query\n      });\n    }\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.queries.forEach(function (query) {\n        _this2.remove(query);\n      });\n    });\n  };\n\n  _proto.get = function get(queryHash) {\n    return this.queriesMap[queryHash];\n  };\n\n  _proto.getAll = function getAll() {\n    return this.queries;\n  };\n\n  _proto.find = function find(arg1, arg2) {\n    var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.queries.find(function (query) {\n      return matchQuery(filters, query);\n    });\n  };\n\n  _proto.findAll = function findAll(arg1, arg2) {\n    var _parseFilterArgs2 = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    return Object.keys(filters).length > 0 ? this.queries.filter(function (query) {\n      return matchQuery(filters, query);\n    }) : this.queries;\n  };\n\n  _proto.notify = function notify(event) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(event);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      _this4.queries.forEach(function (query) {\n        query.onFocus();\n      });\n    });\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.queries.forEach(function (query) {\n        query.onOnline();\n      });\n    });\n  };\n\n  return QueryCache;\n}(Subscribable);"],"names":["QueryCache","_Subscribable","_inheritsLoose","config","_this","call","queries","queriesMap","_proto","prototype","build","client","options","state","_options$queryHash","queryKey","queryHash","hashQueryKeyByOptions","query","get","Query","cache","defaultQueryOptions","defaultOptions","getQueryDefaults","meta","add","push","notify","type","remove","queryInMap","destroy","filter","x","clear","_this2","notifyManager","batch","forEach","getAll","find","arg1","arg2","_parseFilterArgs","parseFilterArgs","filters","exact","matchQuery","findAll","_parseFilterArgs2","Object","keys","length","event","_this3","listeners","listener","onFocus","_this4","onOnline","_this5","Subscribable"],"mappings":"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"}