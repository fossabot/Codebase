{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/es/core/mutationObserver.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getDefaultState } from './mutation';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable';\n// CLASS\nexport var MutationObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationObserver, _Subscribable);\n\n  function MutationObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n\n    _this.setOptions(options);\n\n    _this.bindMethods();\n\n    _this.updateResult();\n\n    return _this;\n  }\n\n  var _proto = MutationObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    this.options = this.client.defaultMutationOptions(options);\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      var _this$currentMutation;\n\n      (_this$currentMutation = this.currentMutation) == null ? void 0 : _this$currentMutation.removeObserver(this);\n    }\n  };\n\n  _proto.onMutationUpdate = function onMutationUpdate(action) {\n    this.updateResult(); // Determine which callbacks to trigger\n\n    var notifyOptions = {\n      listeners: true\n    };\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true;\n    }\n\n    this.notify(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.reset = function reset() {\n    this.currentMutation = undefined;\n    this.updateResult();\n    this.notify({\n      listeners: true\n    });\n  };\n\n  _proto.mutate = function mutate(variables, options) {\n    this.mutateOptions = options;\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this);\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, _extends({}, this.options, {\n      variables: typeof variables !== 'undefined' ? variables : this.options.variables\n    }));\n    this.currentMutation.addObserver(this);\n    return this.currentMutation.execute();\n  };\n\n  _proto.updateResult = function updateResult() {\n    var state = this.currentMutation ? this.currentMutation.state : getDefaultState();\n\n    var result = _extends({}, state, {\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset\n    });\n\n    this.currentResult = result;\n  };\n\n  _proto.notify = function notify(options) {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      // First trigger the mutate callbacks\n      if (_this2.mutateOptions) {\n        if (options.onSuccess) {\n          _this2.mutateOptions.onSuccess == null ? void 0 : _this2.mutateOptions.onSuccess(_this2.currentResult.data, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(_this2.currentResult.data, null, _this2.currentResult.variables, _this2.currentResult.context);\n        } else if (options.onError) {\n          _this2.mutateOptions.onError == null ? void 0 : _this2.mutateOptions.onError(_this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(undefined, _this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n        }\n      } // Then trigger the listeners\n\n\n      if (options.listeners) {\n        _this2.listeners.forEach(function (listener) {\n          listener(_this2.currentResult);\n        });\n      }\n    });\n  };\n\n  return MutationObserver;\n}(Subscribable);"],"names":["MutationObserver","_Subscribable","_inheritsLoose","client","options","_this","call","setOptions","bindMethods","updateResult","_proto","prototype","mutate","bind","reset","defaultMutationOptions","onUnsubscribe","listeners","length","_this$currentMutation","currentMutation","removeObserver","onMutationUpdate","action","notifyOptions","type","onSuccess","onError","notify","getCurrentResult","currentResult","undefined","variables","mutateOptions","getMutationCache","build","_extends","addObserver","execute","state","getDefaultState","result","isLoading","status","isSuccess","isError","isIdle","_this2","notifyManager","batch","data","context","onSettled","error","forEach","listener","Subscribable"],"mappings":"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"}