{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/es/core/mutationCache.js"],"sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { matchMutation, noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n\n// CLASS\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined,\n      meta: options.meta\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.find = function find(filters) {\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.mutations.find(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.findAll = function findAll(filters) {\n    return this.mutations.filter(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);"],"names":["MutationCache","_Subscribable","_inheritsLoose","config","_this","call","mutations","mutationId","_proto","prototype","build","client","options","state","mutation","Mutation","mutationCache","defaultMutationOptions","defaultOptions","mutationKey","getMutationDefaults","undefined","meta","add","push","notify","remove","filter","x","cancel","clear","_this2","notifyManager","batch","forEach","getAll","find","filters","exact","matchMutation","findAll","_this3","listeners","listener","onFocus","resumePausedMutations","onOnline","pausedMutations","isPaused","reduce","promise","then","continue","catch","noop","Promise","resolve","Subscribable"],"mappings":"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"}