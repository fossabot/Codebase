{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/es/core/hydration.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\n\n// TYPES\n// FUNCTIONS\nfunction dehydrateMutation(mutation) {\n  return {\n    mutationKey: mutation.options.mutationKey,\n    state: mutation.state\n  };\n} // Most config is not dehydrated but instead meant to configure again when\n// consuming the de/rehydrated data, typically with useQuery on the client.\n// Sometimes it might make sense to prefetch data on the server and include\n// in the html-payload, but not consume it on the initial render.\n\n\nfunction dehydrateQuery(query) {\n  return {\n    state: query.state,\n    queryKey: query.queryKey,\n    queryHash: query.queryHash\n  };\n}\n\nfunction defaultShouldDehydrateMutation(mutation) {\n  return mutation.state.isPaused;\n}\n\nfunction defaultShouldDehydrateQuery(query) {\n  return query.state.status === 'success';\n}\n\nexport function dehydrate(client, options) {\n  var _options, _options2;\n\n  options = options || {};\n  var mutations = [];\n  var queries = [];\n\n  if (((_options = options) == null ? void 0 : _options.dehydrateMutations) !== false) {\n    var shouldDehydrateMutation = options.shouldDehydrateMutation || defaultShouldDehydrateMutation;\n    client.getMutationCache().getAll().forEach(function (mutation) {\n      if (shouldDehydrateMutation(mutation)) {\n        mutations.push(dehydrateMutation(mutation));\n      }\n    });\n  }\n\n  if (((_options2 = options) == null ? void 0 : _options2.dehydrateQueries) !== false) {\n    var shouldDehydrateQuery = options.shouldDehydrateQuery || defaultShouldDehydrateQuery;\n    client.getQueryCache().getAll().forEach(function (query) {\n      if (shouldDehydrateQuery(query)) {\n        queries.push(dehydrateQuery(query));\n      }\n    });\n  }\n\n  return {\n    mutations: mutations,\n    queries: queries\n  };\n}\nexport function hydrate(client, dehydratedState, options) {\n  if (typeof dehydratedState !== 'object' || dehydratedState === null) {\n    return;\n  }\n\n  var mutationCache = client.getMutationCache();\n  var queryCache = client.getQueryCache();\n  var mutations = dehydratedState.mutations || [];\n  var queries = dehydratedState.queries || [];\n  mutations.forEach(function (dehydratedMutation) {\n    var _options$defaultOptio;\n\n    mutationCache.build(client, _extends({}, options == null ? void 0 : (_options$defaultOptio = options.defaultOptions) == null ? void 0 : _options$defaultOptio.mutations, {\n      mutationKey: dehydratedMutation.mutationKey\n    }), dehydratedMutation.state);\n  });\n  queries.forEach(function (dehydratedQuery) {\n    var _options$defaultOptio2;\n\n    var query = queryCache.get(dehydratedQuery.queryHash); // Do not hydrate if an existing query exists with newer data\n\n    if (query) {\n      if (query.state.dataUpdatedAt < dehydratedQuery.state.dataUpdatedAt) {\n        query.setState(dehydratedQuery.state);\n      }\n\n      return;\n    } // Restore query\n\n\n    queryCache.build(client, _extends({}, options == null ? void 0 : (_options$defaultOptio2 = options.defaultOptions) == null ? void 0 : _options$defaultOptio2.queries, {\n      queryKey: dehydratedQuery.queryKey,\n      queryHash: dehydratedQuery.queryHash\n    }), dehydratedQuery.state);\n  });\n}"],"names":["dehydrate","hydrate","dehydrateMutation","mutation","mutationKey","options","state","dehydrateQuery","query","queryKey","queryHash","defaultShouldDehydrateMutation","isPaused","defaultShouldDehydrateQuery","status","client","_options","_options2","mutations","queries","dehydrateMutations","shouldDehydrateMutation","getMutationCache","getAll","forEach","push","dehydrateQueries","shouldDehydrateQuery","getQueryCache","dehydratedState","mutationCache","queryCache","dehydratedMutation","_options$defaultOptio","build","_extends","defaultOptions","dehydratedQuery","_options$defaultOptio2","get","dataUpdatedAt","setState"],"mappings":"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"}