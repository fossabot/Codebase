{"version":3,"sources":["../../../../../../../libs/movie/data-access/node_modules/react-query/dist/createWebStoragePersistor-experimental.development.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.ReactQueryCreateWebStoragePersistorExperimental = {}));\n}(this, (function (exports) { 'use strict';\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function noop() {\n    return undefined;\n  }\n\n  function createWebStoragePersistor(_ref) {\n    var storage = _ref.storage,\n        _ref$key = _ref.key,\n        key = _ref$key === void 0 ? \"REACT_QUERY_OFFLINE_CACHE\" : _ref$key,\n        _ref$throttleTime = _ref.throttleTime,\n        throttleTime = _ref$throttleTime === void 0 ? 1000 : _ref$throttleTime,\n        _ref$serialize = _ref.serialize,\n        serialize = _ref$serialize === void 0 ? JSON.stringify : _ref$serialize,\n        _ref$deserialize = _ref.deserialize,\n        deserialize = _ref$deserialize === void 0 ? JSON.parse : _ref$deserialize;\n\n    //try to save data to storage\n    function trySave(persistedClient) {\n      try {\n        storage.setItem(key, serialize(persistedClient));\n      } catch (_unused) {\n        return false;\n      }\n\n      return true;\n    }\n\n    if (typeof storage !== 'undefined') {\n      return {\n        persistClient: throttle(function (persistedClient) {\n          if (trySave(persistedClient) !== true) {\n            var mutations = [].concat(persistedClient.clientState.mutations);\n            var queries = [].concat(persistedClient.clientState.queries);\n\n            var _client = _extends({}, persistedClient, {\n              clientState: {\n                mutations: mutations,\n                queries: queries\n              }\n            }); // sort queries by dataUpdatedAt (oldest first)\n\n\n            var sortedQueries = [].concat(queries).sort(function (a, b) {\n              return a.state.dataUpdatedAt - b.state.dataUpdatedAt;\n            }); // clean old queries and try to save\n\n            var _loop = function _loop() {\n              var oldestData = sortedQueries.shift();\n              _client.clientState.queries = queries.filter(function (q) {\n                return q !== oldestData;\n              });\n\n              if (trySave(_client)) {\n                return {\n                  v: void 0\n                }; // save success\n              }\n            };\n\n            while (sortedQueries.length > 0) {\n              var _ret = _loop();\n\n              if (typeof _ret === \"object\") return _ret.v;\n            } // clean mutations and try to save\n\n\n            while (mutations.shift()) {\n              if (trySave(_client)) {\n                return; // save success\n              }\n            }\n          }\n        }, throttleTime),\n        restoreClient: function restoreClient() {\n          var cacheString = storage.getItem(key);\n\n          if (!cacheString) {\n            return;\n          }\n\n          return deserialize(cacheString);\n        },\n        removeClient: function removeClient() {\n          storage.removeItem(key);\n        }\n      };\n    }\n\n    return {\n      persistClient: noop,\n      restoreClient: noop,\n      removeClient: noop\n    };\n  }\n\n  function throttle(func, wait) {\n    if (wait === void 0) {\n      wait = 100;\n    }\n\n    var timer = null;\n    var params;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      params = args;\n\n      if (timer === null) {\n        timer = setTimeout(function () {\n          func.apply(void 0, params);\n          timer = null;\n        }, wait);\n      }\n    };\n  }\n\n  exports.createWebStoragePersistor = createWebStoragePersistor;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=createWebStoragePersistor-experimental.development.js.map\n"],"names":["global","factory","exports","module","define","amd","self","ReactQueryCreateWebStoragePersistorExperimental","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","noop","undefined","createWebStoragePersistor","_ref","storage","_ref$key","_ref$throttleTime","throttleTime","_ref$serialize","serialize","JSON","stringify","_ref$deserialize","deserialize","parse","trySave","persistedClient","setItem","_unused","persistClient","throttle","mutations","concat","clientState","queries","_client","sortedQueries","sort","a","b","state","dataUpdatedAt","_loop","oldestData","shift","filter","q","v","_ret","restoreClient","cacheString","getItem","removeClient","removeItem","func","wait","timer","params","_len","args","Array","_key","setTimeout","defineProperty","value"],"mappings":"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"}