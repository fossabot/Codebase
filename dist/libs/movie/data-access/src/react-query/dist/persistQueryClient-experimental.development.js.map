{"version":3,"sources":["../../../../../../../libs/movie/data-access/node_modules/react-query/dist/persistQueryClient-experimental.development.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react-query')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react-query'], factory) :\n  (global = global || self, factory(global.ReactQueryPersistQueryClientExperimental = {}, global.ReactQuery));\n}(this, (function (exports, reactQuery) { 'use strict';\n\n  // TYPES\n  // FUNCTIONS\n  var logger = console;\n  function getLogger() {\n    return logger;\n  }\n\n  function _await(value, then, direct) {\n    if (direct) {\n      return then ? then(value) : value;\n    }\n\n    if (!value || !value.then) {\n      value = Promise.resolve(value);\n    }\n\n    return then ? value.then(then) : value;\n  }\n\n  function _catch(body, recover) {\n    try {\n      var result = body();\n    } catch (e) {\n      return recover(e);\n    }\n\n    if (result && result.then) {\n      return result.then(void 0, recover);\n    }\n\n    return result;\n  }\n\n  function _continue(value, then) {\n    return value && value.then ? value.then(then) : then(value);\n  }\n\n  function _empty() {}\n\n  function _invokeIgnored(body) {\n    var result = body();\n\n    if (result && result.then) {\n      return result.then(_empty);\n    }\n  }\n\n  function _async(f) {\n    return function () {\n      for (var args = [], i = 0; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n\n      try {\n        return Promise.resolve(f.apply(this, args));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n  }\n\n  var persistQueryClient = _async(function (_ref) {\n    var queryClient = _ref.queryClient,\n        persistor = _ref.persistor,\n        _ref$maxAge = _ref.maxAge,\n        maxAge = _ref$maxAge === void 0 ? 1000 * 60 * 60 * 24 : _ref$maxAge,\n        _ref$buster = _ref.buster,\n        buster = _ref$buster === void 0 ? '' : _ref$buster,\n        hydrateOptions = _ref.hydrateOptions,\n        dehydrateOptions = _ref.dehydrateOptions;\n    return _invokeIgnored(function () {\n      if (typeof window !== 'undefined') {\n        // Subscribe to changes\n        var saveClient = function saveClient() {\n          var persistClient = {\n            buster: buster,\n            timestamp: Date.now(),\n            clientState: reactQuery.dehydrate(queryClient, dehydrateOptions)\n          };\n          persistor.persistClient(persistClient);\n        }; // Attempt restore\n\n\n        return _continue(_catch(function () {\n          return _await(persistor.restoreClient(), function (persistedClient) {\n            if (persistedClient) {\n              if (persistedClient.timestamp) {\n                var expired = Date.now() - persistedClient.timestamp > maxAge;\n                var busted = persistedClient.buster !== buster;\n\n                if (expired || busted) {\n                  persistor.removeClient();\n                } else {\n                  reactQuery.hydrate(queryClient, persistedClient.clientState, hydrateOptions);\n                }\n              } else {\n                persistor.removeClient();\n              }\n            }\n          });\n        }, function (err) {\n          getLogger().error(err);\n          getLogger().warn('Encountered an error attempting to restore client cache from persisted location. As a precaution, the persisted cache will be discarded.');\n          persistor.removeClient();\n        }), function () {\n          // Subscribe to changes in the query cache to trigger the save\n          queryClient.getQueryCache().subscribe(saveClient);\n        });\n      }\n    });\n  });\n\n  exports.persistQueryClient = persistQueryClient;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=persistQueryClient-experimental.development.js.map\n"],"names":["global","factory","exports","module","require","define","amd","self","ReactQueryPersistQueryClientExperimental","ReactQuery","reactQuery","logger","console","getLogger","_await","value","then","direct","Promise","resolve","_catch","body","recover","result","e","_continue","_empty","_invokeIgnored","_async","f","args","i","arguments","length","apply","reject","persistQueryClient","_ref","queryClient","persistor","_ref$maxAge","maxAge","_ref$buster","buster","hydrateOptions","dehydrateOptions","window","saveClient","persistClient","timestamp","Date","now","clientState","dehydrate","restoreClient","persistedClient","expired","busted","removeClient","hydrate","err","error","warn","getQueryCache","subscribe","Object","defineProperty"],"mappings":"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"}