"use strict";
!function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define([
        "exports"
    ], t) : t((e = e || self).ReactQueryCreateAsyncStoragePersistorExperimental = {});
}(void 0, function(e1) {
    "use strict";
    function t1(e, t, n) {
        return n ? t ? t(e) : e : (e && e.then || (e = Promise.resolve(e)), t ? e.then(t) : e);
    }
    function n1(e2) {
        return function() {
            for(var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n];
            try {
                return Promise.resolve(e2.apply(this, t));
            } catch (e) {
                return Promise.reject(e);
            }
        };
    }
    function r1() {}
    function i1(e) {
        var t = e();
        if (t && t.then) return t.then(r1);
    }
    function o1(e, r2) {
        var o2 = void 0 === r2 ? {} : r2, u1 = o2.interval, f = void 0 === u1 ? 1000 : u1, c = o2.limit, s = void 0 === c ? 1 : c;
        if ("function" != typeof e) throw new Error("argument is not function.");
        var a, l = {
            current: !1
        }, v = 0, d = [];
        return function() {
            for(var r3 = arguments.length, o = new Array(r3), u = 0; u < r3; u++)o[u] = arguments[u];
            return n1(function() {
                return l.current && (v = Date.now(), d.length > s && d.shift(), d.push(o), clearTimeout(a)), i1(function() {
                    if (Date.now() - v > f) return l.current = !0, t1(e.apply(void 0, o), function() {
                        v = Date.now(), l.current = !1;
                    });
                    if (d.length > 0) {
                        var r = d[d.length - 1];
                        a = setTimeout(n1(function() {
                            return i1(function() {
                                if (!l.current) return l.current = !0, t1(e.apply(void 0, r), function() {
                                    l.current = !1;
                                });
                            });
                        }), f);
                    }
                });
            })();
        };
    }
    e1.createAsyncStoragePersistor = function(e3) {
        var r = e3.storage, i = e3.key, u = void 0 === i ? "REACT_QUERY_OFFLINE_CACHE" : i, f = e3.throttleTime, c = void 0 === f ? 1000 : f, s = e3.serialize, a = void 0 === s ? JSON.stringify : s, l = e3.deserialize, v = void 0 === l ? JSON.parse : l;
        return {
            persistClient: o1(function(e) {
                return r.setItem(u, a(e));
            }, {
                interval: c
            }),
            restoreClient: n1(function() {
                return t1(r.getItem(u), function(e) {
                    if (e) return v(e);
                });
            }),
            removeClient: function() {
                return r.removeItem(u);
            }
        };
    }, Object.defineProperty(e1, "__esModule", {
        value: !0
    });
}); //# sourceMappingURL=createAsyncStoragePersistor-experimental.production.min.js.map

//# sourceMappingURL=createAsyncStoragePersistor-experimental.production.min.js.map