"use strict";
!function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports, require("react-query")) : "function" == typeof define && define.amd ? define([
        "exports",
        "react-query"
    ], t) : t((e = e || self).ReactQueryPersistQueryClientExperimental = {}, e.ReactQuery);
}(void 0, function(e1, t1) {
    "use strict";
    var r1 = console;
    function n1() {
        return r1;
    }
    function i1() {}
    var o1, u1 = (o1 = function(e2) {
        var r2 = e2.queryClient, o = e2.persistor, u = e2.maxAge, a = void 0 === u ? 86400000 : u, c = e2.buster, s = void 0 === c ? "" : c, f = e2.hydrateOptions, d = e2.dehydrateOptions;
        return (function(e) {
            var t = e();
            if (t && t.then) return t.then(i1);
        })(function() {
            if ("undefined" != typeof window) {
                var e3 = function() {
                    var e = {
                        buster: s,
                        timestamp: Date.now(),
                        clientState: t1.dehydrate(r2, d)
                    };
                    o.persistClient(e);
                };
                return (function(e, t) {
                    return e && e.then ? e.then(t) : t(e);
                })(function(e, t) {
                    try {
                        var r = e();
                    } catch (e5) {
                        return t(e5);
                    }
                    return r && r.then ? r.then(void 0, t) : r;
                }(function() {
                    return e6 = o.restoreClient(), n2 = function(e) {
                        if (e) if (e.timestamp) {
                            var n = Date.now() - e.timestamp > a, i = e.buster !== s;
                            n || i ? o.removeClient() : t1.hydrate(r2, e.clientState, f);
                        } else o.removeClient();
                    }, i2 ? n2 ? n2(e6) : e6 : (e6 && e6.then || (e6 = Promise.resolve(e6)), n2 ? e6.then(n2) : e6);
                    var e6, n2, i2;
                }, function(e) {
                    n1().error(e), n1().warn("Encountered an error attempting to restore client cache from persisted location. As a precaution, the persisted cache will be discarded."), o.removeClient();
                }), function() {
                    r2.getQueryCache().subscribe(e3);
                });
            }
        });
    }, function() {
        for(var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t];
        try {
            return Promise.resolve(o1.apply(this, e));
        } catch (e7) {
            return Promise.reject(e7);
        }
    });
    e1.persistQueryClient = u1, Object.defineProperty(e1, "__esModule", {
        value: !0
    });
}); //# sourceMappingURL=persistQueryClient-experimental.production.min.js.map

//# sourceMappingURL=persistQueryClient-experimental.production.min.js.map