{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/core/mutationObserver.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.MutationObserver = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _mutation = require(\"./mutation\");\n\nvar _notifyManager = require(\"./notifyManager\");\n\nvar _subscribable = require(\"./subscribable\");\n\n// CLASS\nvar MutationObserver = /*#__PURE__*/function (_Subscribable) {\n  (0, _inheritsLoose2.default)(MutationObserver, _Subscribable);\n\n  function MutationObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n\n    _this.setOptions(options);\n\n    _this.bindMethods();\n\n    _this.updateResult();\n\n    return _this;\n  }\n\n  var _proto = MutationObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    this.options = this.client.defaultMutationOptions(options);\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      var _this$currentMutation;\n\n      (_this$currentMutation = this.currentMutation) == null ? void 0 : _this$currentMutation.removeObserver(this);\n    }\n  };\n\n  _proto.onMutationUpdate = function onMutationUpdate(action) {\n    this.updateResult(); // Determine which callbacks to trigger\n\n    var notifyOptions = {\n      listeners: true\n    };\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true;\n    }\n\n    this.notify(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.reset = function reset() {\n    this.currentMutation = undefined;\n    this.updateResult();\n    this.notify({\n      listeners: true\n    });\n  };\n\n  _proto.mutate = function mutate(variables, options) {\n    this.mutateOptions = options;\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this);\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, (0, _extends2.default)({}, this.options, {\n      variables: typeof variables !== 'undefined' ? variables : this.options.variables\n    }));\n    this.currentMutation.addObserver(this);\n    return this.currentMutation.execute();\n  };\n\n  _proto.updateResult = function updateResult() {\n    var state = this.currentMutation ? this.currentMutation.state : (0, _mutation.getDefaultState)();\n    var result = (0, _extends2.default)({}, state, {\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset\n    });\n    this.currentResult = result;\n  };\n\n  _proto.notify = function notify(options) {\n    var _this2 = this;\n\n    _notifyManager.notifyManager.batch(function () {\n      // First trigger the mutate callbacks\n      if (_this2.mutateOptions) {\n        if (options.onSuccess) {\n          _this2.mutateOptions.onSuccess == null ? void 0 : _this2.mutateOptions.onSuccess(_this2.currentResult.data, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(_this2.currentResult.data, null, _this2.currentResult.variables, _this2.currentResult.context);\n        } else if (options.onError) {\n          _this2.mutateOptions.onError == null ? void 0 : _this2.mutateOptions.onError(_this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(undefined, _this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n        }\n      } // Then trigger the listeners\n\n\n      if (options.listeners) {\n        _this2.listeners.forEach(function (listener) {\n          listener(_this2.currentResult);\n        });\n      }\n    });\n  };\n\n  return MutationObserver;\n}(_subscribable.Subscribable);\n\nexports.MutationObserver = MutationObserver;"],"names":["_interopRequireDefault","require","exports","__esModule","MutationObserver","_extends2","_inheritsLoose2","_mutation","_notifyManager","_subscribable","_Subscribable","default","client","options","_this","call","setOptions","bindMethods","updateResult","_proto","prototype","mutate","bind","reset","defaultMutationOptions","onUnsubscribe","listeners","length","_this$currentMutation","currentMutation","removeObserver","onMutationUpdate","action","notifyOptions","type","onSuccess","onError","notify","getCurrentResult","currentResult","undefined","variables","mutateOptions","getMutationCache","build","addObserver","execute","state","getDefaultState","result","isLoading","status","isSuccess","isError","isIdle","_this2","notifyManager","batch","data","context","onSettled","error","forEach","listener","Subscribable"],"mappings":"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"}