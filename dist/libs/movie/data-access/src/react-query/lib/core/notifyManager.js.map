{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/core/notifyManager.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.notifyManager = exports.NotifyManager = void 0;\n\nvar _utils = require(\"./utils\");\n\n// CLASS\nvar NotifyManager = /*#__PURE__*/function () {\n  function NotifyManager() {\n    this.queue = [];\n    this.transactions = 0;\n\n    this.notifyFn = function (callback) {\n      callback();\n    };\n\n    this.batchNotifyFn = function (callback) {\n      callback();\n    };\n  }\n\n  var _proto = NotifyManager.prototype;\n\n  _proto.batch = function batch(callback) {\n    var result;\n    this.transactions++;\n\n    try {\n      result = callback();\n    } finally {\n      this.transactions--;\n\n      if (!this.transactions) {\n        this.flush();\n      }\n    }\n\n    return result;\n  };\n\n  _proto.schedule = function schedule(callback) {\n    var _this = this;\n\n    if (this.transactions) {\n      this.queue.push(callback);\n    } else {\n      (0, _utils.scheduleMicrotask)(function () {\n        _this.notifyFn(callback);\n      });\n    }\n  }\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  ;\n\n  _proto.batchCalls = function batchCalls(callback) {\n    var _this2 = this;\n\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this2.schedule(function () {\n        callback.apply(void 0, args);\n      });\n    };\n  };\n\n  _proto.flush = function flush() {\n    var _this3 = this;\n\n    var queue = this.queue;\n    this.queue = [];\n\n    if (queue.length) {\n      (0, _utils.scheduleMicrotask)(function () {\n        _this3.batchNotifyFn(function () {\n          queue.forEach(function (callback) {\n            _this3.notifyFn(callback);\n          });\n        });\n      });\n    }\n  }\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  ;\n\n  _proto.setNotifyFunction = function setNotifyFunction(fn) {\n    this.notifyFn = fn;\n  }\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  ;\n\n  _proto.setBatchNotifyFunction = function setBatchNotifyFunction(fn) {\n    this.batchNotifyFn = fn;\n  };\n\n  return NotifyManager;\n}(); // SINGLETON\n\n\nexports.NotifyManager = NotifyManager;\nvar notifyManager = new NotifyManager();\nexports.notifyManager = notifyManager;"],"names":["exports","__esModule","notifyManager","NotifyManager","_utils","require","queue","transactions","notifyFn","callback","batchNotifyFn","_proto","prototype","batch","result","flush","schedule","_this","push","scheduleMicrotask","batchCalls","_this2","_len","arguments","length","args","Array","_key","apply","_this3","forEach","setNotifyFunction","fn","setBatchNotifyFunction"],"mappings":"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"}