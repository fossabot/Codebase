{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/core/queryCache.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.QueryCache = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _utils = require(\"./utils\");\n\nvar _query = require(\"./query\");\n\nvar _notifyManager = require(\"./notifyManager\");\n\nvar _subscribable = require(\"./subscribable\");\n\n// CLASS\nvar QueryCache = /*#__PURE__*/function (_Subscribable) {\n  (0, _inheritsLoose2.default)(QueryCache, _Subscribable);\n\n  function QueryCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n\n  var _proto = QueryCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var _options$queryHash;\n\n    var queryKey = options.queryKey;\n    var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : (0, _utils.hashQueryKeyByOptions)(queryKey, options);\n    var query = this.get(queryHash);\n\n    if (!query) {\n      query = new _query.Query({\n        cache: this,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        options: client.defaultQueryOptions(options),\n        state: state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n        meta: options.meta\n      });\n      this.add(query);\n    }\n\n    return query;\n  };\n\n  _proto.add = function add(query) {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query;\n      this.queries.push(query);\n      this.notify({\n        type: 'queryAdded',\n        query: query\n      });\n    }\n  };\n\n  _proto.remove = function remove(query) {\n    var queryInMap = this.queriesMap[query.queryHash];\n\n    if (queryInMap) {\n      query.destroy();\n      this.queries = this.queries.filter(function (x) {\n        return x !== query;\n      });\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash];\n      }\n\n      this.notify({\n        type: 'queryRemoved',\n        query: query\n      });\n    }\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    _notifyManager.notifyManager.batch(function () {\n      _this2.queries.forEach(function (query) {\n        _this2.remove(query);\n      });\n    });\n  };\n\n  _proto.get = function get(queryHash) {\n    return this.queriesMap[queryHash];\n  };\n\n  _proto.getAll = function getAll() {\n    return this.queries;\n  };\n\n  _proto.find = function find(arg1, arg2) {\n    var _parseFilterArgs = (0, _utils.parseFilterArgs)(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.queries.find(function (query) {\n      return (0, _utils.matchQuery)(filters, query);\n    });\n  };\n\n  _proto.findAll = function findAll(arg1, arg2) {\n    var _parseFilterArgs2 = (0, _utils.parseFilterArgs)(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    return Object.keys(filters).length > 0 ? this.queries.filter(function (query) {\n      return (0, _utils.matchQuery)(filters, query);\n    }) : this.queries;\n  };\n\n  _proto.notify = function notify(event) {\n    var _this3 = this;\n\n    _notifyManager.notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(event);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this4 = this;\n\n    _notifyManager.notifyManager.batch(function () {\n      _this4.queries.forEach(function (query) {\n        query.onFocus();\n      });\n    });\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this5 = this;\n\n    _notifyManager.notifyManager.batch(function () {\n      _this5.queries.forEach(function (query) {\n        query.onOnline();\n      });\n    });\n  };\n\n  return QueryCache;\n}(_subscribable.Subscribable);\n\nexports.QueryCache = QueryCache;"],"names":["_interopRequireDefault","require","exports","__esModule","QueryCache","_inheritsLoose2","_utils","_query","_notifyManager","_subscribable","_Subscribable","default","config","_this","call","queries","queriesMap","_proto","prototype","build","client","options","state","_options$queryHash","queryKey","queryHash","hashQueryKeyByOptions","query","get","Query","cache","defaultQueryOptions","defaultOptions","getQueryDefaults","meta","add","push","notify","type","remove","queryInMap","destroy","filter","x","clear","_this2","notifyManager","batch","forEach","getAll","find","arg1","arg2","_parseFilterArgs","parseFilterArgs","filters","exact","matchQuery","findAll","_parseFilterArgs2","Object","keys","length","event","_this3","listeners","listener","onFocus","_this4","onOnline","_this5","Subscribable"],"mappings":"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"}