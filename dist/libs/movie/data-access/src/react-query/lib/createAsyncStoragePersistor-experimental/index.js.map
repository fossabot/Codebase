{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/createAsyncStoragePersistor-experimental/index.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.createAsyncStoragePersistor = void 0;\n\nfunction _await(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nfunction _async(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nfunction _empty() {}\n\nfunction _invokeIgnored(body) {\n  var result = body();\n\n  if (result && result.then) {\n    return result.then(_empty);\n  }\n}\n\nvar createAsyncStoragePersistor = function createAsyncStoragePersistor(_ref) {\n  var storage = _ref.storage,\n      _ref$key = _ref.key,\n      key = _ref$key === void 0 ? \"REACT_QUERY_OFFLINE_CACHE\" : _ref$key,\n      _ref$throttleTime = _ref.throttleTime,\n      throttleTime = _ref$throttleTime === void 0 ? 1000 : _ref$throttleTime,\n      _ref$serialize = _ref.serialize,\n      serialize = _ref$serialize === void 0 ? JSON.stringify : _ref$serialize,\n      _ref$deserialize = _ref.deserialize,\n      deserialize = _ref$deserialize === void 0 ? JSON.parse : _ref$deserialize;\n  return {\n    persistClient: asyncThrottle(function (persistedClient) {\n      return storage.setItem(key, serialize(persistedClient));\n    }, {\n      interval: throttleTime\n    }),\n    restoreClient: _async(function () {\n      return _await(storage.getItem(key), function (cacheString) {\n        if (!cacheString) {\n          return;\n        }\n\n        return deserialize(cacheString);\n      });\n    }),\n    removeClient: function removeClient() {\n      return storage.removeItem(key);\n    }\n  };\n};\n\nexports.createAsyncStoragePersistor = createAsyncStoragePersistor;\n\nfunction asyncThrottle(func, _temp) {\n  var _ref2 = _temp === void 0 ? {} : _temp,\n      _ref2$interval = _ref2.interval,\n      interval = _ref2$interval === void 0 ? 1000 : _ref2$interval,\n      _ref2$limit = _ref2.limit,\n      limit = _ref2$limit === void 0 ? 1 : _ref2$limit;\n\n  if (typeof func !== 'function') throw new Error('argument is not function.');\n  var running = {\n    current: false\n  };\n  var lastTime = 0;\n  var timeout;\n  var queue = [];\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _async(function () {\n      if (running.current) {\n        lastTime = Date.now();\n\n        if (queue.length > limit) {\n          queue.shift();\n        }\n\n        queue.push(args);\n        clearTimeout(timeout);\n      }\n\n      return _invokeIgnored(function () {\n        if (Date.now() - lastTime > interval) {\n          running.current = true;\n          return _await(func.apply(void 0, args), function () {\n            lastTime = Date.now();\n            running.current = false;\n          });\n        } else {\n          if (queue.length > 0) {\n            var lastArgs = queue[queue.length - 1];\n            timeout = setTimeout(_async(function () {\n              return _invokeIgnored(function () {\n                if (!running.current) {\n                  running.current = true;\n                  return _await(func.apply(void 0, lastArgs), function () {\n                    running.current = false;\n                  });\n                }\n              });\n            }), interval);\n          }\n        }\n      });\n    })();\n  };\n}"],"names":["exports","__esModule","createAsyncStoragePersistor","_await","value","then","direct","Promise","resolve","_async","f","args","i","arguments","length","apply","e","reject","_empty","_invokeIgnored","body","result","_ref","storage","_ref$key","key","_ref$throttleTime","throttleTime","_ref$serialize","serialize","JSON","stringify","_ref$deserialize","deserialize","parse","persistClient","asyncThrottle","persistedClient","setItem","interval","restoreClient","getItem","cacheString","removeClient","removeItem","func","_temp","_ref2","_ref2$interval","_ref2$limit","limit","Error","running","current","lastTime","timeout","queue","_len","Array","_key","Date","now","shift","push","clearTimeout","lastArgs","setTimeout"],"mappings":"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"}