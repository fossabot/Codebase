{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/react/useQueries.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\nexports.useQueries = useQueries;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _notifyManager = require(\"../core/notifyManager\");\n\nvar _queriesObserver = require(\"../core/queriesObserver\");\n\nvar _QueryClientProvider = require(\"./QueryClientProvider\");\n\nfunction useQueries(queries) {\n  var mountedRef = _react.default.useRef(false);\n\n  var _React$useState = _react.default.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var queryClient = (0, _QueryClientProvider.useQueryClient)();\n  var defaultedQueries = (0, _react.useMemo)(function () {\n    return queries.map(function (options) {\n      var defaultedOptions = queryClient.defaultQueryObserverOptions(options); // Make sure the results are already in fetching state before subscribing or updating options\n\n      defaultedOptions.optimisticResults = true;\n      return defaultedOptions;\n    });\n  }, [queries, queryClient]);\n\n  var _React$useState2 = _react.default.useState(function () {\n    return new _queriesObserver.QueriesObserver(queryClient, defaultedQueries);\n  }),\n      observer = _React$useState2[0];\n\n  var result = observer.getOptimisticResult(defaultedQueries);\n\n  _react.default.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribe = observer.subscribe(_notifyManager.notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, [observer]);\n\n  _react.default.useEffect(function () {\n    // Do not notify on updates because of changes in the options because\n    // these changes should already be reflected in the optimistic result.\n    observer.setQueries(defaultedQueries, {\n      listeners: false\n    });\n  }, [defaultedQueries, observer]);\n\n  return result;\n}"],"names":["_interopRequireWildcard","require","exports","__esModule","useQueries","_react","_notifyManager","_queriesObserver","_QueryClientProvider","queries","mountedRef","default","useRef","_React$useState","useState","forceUpdate","queryClient","useQueryClient","defaultedQueries","useMemo","map","options","defaultedOptions","defaultQueryObserverOptions","optimisticResults","_React$useState2","QueriesObserver","observer","result","getOptimisticResult","useEffect","current","unsubscribe","subscribe","notifyManager","batchCalls","x","setQueries","listeners"],"mappings":"AAAA,CAAY;AAEZ,GAAG,CAACA,uBAAuB,GAAGC,OAAO,CAAC,CAA+C;AAErFC,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,UAAU,GAAGA,UAAU;AAE/B,GAAG,CAACC,MAAM,GAAGL,uBAAuB,CAACC,OAAO,CAAC,CAAO;AAEpD,GAAG,CAACK,cAAc,GAAGL,OAAO,CAAC,CAAuB;AAEpD,GAAG,CAACM,gBAAgB,GAAGN,OAAO,CAAC,CAAyB;AAExD,GAAG,CAACO,oBAAoB,GAAGP,OAAO,CAAC,CAAuB;SAEjDG,UAAU,CAACK,OAAO,EAAE,CAAC;IAC5B,GAAG,CAACC,UAAU,GAAGL,MAAM,CAACM,OAAO,CAACC,MAAM,CAAC,KAAK;IAE5C,GAAG,CAACC,eAAe,GAAGR,MAAM,CAACM,OAAO,CAACG,QAAQ,CAAC,CAAC,GAC3CC,WAAW,GAAGF,eAAe,CAAC,CAAC;IAEnC,GAAG,CAACG,WAAW,IAAI,CAAC,EAAER,oBAAoB,CAACS,cAAc;IACzD,GAAG,CAACC,gBAAgB,IAAI,CAAC,EAAEb,MAAM,CAACc,OAAO,EAAE,QAAQ,GAAI,CAAC;QACtD,MAAM,CAACV,OAAO,CAACW,GAAG,CAAC,QAAQ,CAAEC,OAAO,EAAE,CAAC;YACrC,GAAG,CAACC,gBAAgB,GAAGN,WAAW,CAACO,2BAA2B,CAACF,OAAO,EAAG,CAA6F,AAA7F,EAA6F,AAA7F,2FAA6F;YAEtKC,gBAAgB,CAACE,iBAAiB,GAAG,IAAI;YACzC,MAAM,CAACF,gBAAgB;QACzB,CAAC;IACH,CAAC,EAAE,CAACb;QAAAA,OAAO;QAAEO,WAAW;IAAA,CAAC;IAEzB,GAAG,CAACS,gBAAgB,GAAGpB,MAAM,CAACM,OAAO,CAACG,QAAQ,CAAC,QAAQ,GAAI,CAAC;QAC1D,MAAM,CAAC,GAAG,CAACP,gBAAgB,CAACmB,eAAe,CAACV,WAAW,EAAEE,gBAAgB;IAC3E,CAAC,GACGS,QAAQ,GAAGF,gBAAgB,CAAC,CAAC;IAEjC,GAAG,CAACG,MAAM,GAAGD,QAAQ,CAACE,mBAAmB,CAACX,gBAAgB;IAE1Db,MAAM,CAACM,OAAO,CAACmB,SAAS,CAAC,QAAQ,GAAI,CAAC;QACpCpB,UAAU,CAACqB,OAAO,GAAG,IAAI;QACzB,GAAG,CAACC,WAAW,GAAGL,QAAQ,CAACM,SAAS,CAAC3B,cAAc,CAAC4B,aAAa,CAACC,UAAU,CAAC,QAAQ,GAAI,CAAC;YACxF,EAAE,EAAEzB,UAAU,CAACqB,OAAO,EAAE,CAAC;gBACvBhB,WAAW,CAAC,QAAQ,CAAEqB,CAAC,EAAE,CAAC;oBACxB,MAAM,CAACA,CAAC,GAAG,CAAC;gBACd,CAAC;YACH,CAAC;QACH,CAAC;QACD,MAAM,CAAC,QAAQ,GAAI,CAAC;YAClB1B,UAAU,CAACqB,OAAO,GAAG,KAAK;YAC1BC,WAAW;QACb,CAAC;IACH,CAAC,EAAE,CAACL;QAAAA,QAAQ;IAAA,CAAC;IAEbtB,MAAM,CAACM,OAAO,CAACmB,SAAS,CAAC,QAAQ,GAAI,CAAC;QACpC,EAAqE,AAArE,mEAAqE;QACrE,EAAsE,AAAtE,oEAAsE;QACtEH,QAAQ,CAACU,UAAU,CAACnB,gBAAgB,EAAE,CAAC;YACrCoB,SAAS,EAAE,KAAK;QAClB,CAAC;IACH,CAAC,EAAE,CAACpB;QAAAA,gBAAgB;QAAES,QAAQ;IAAA,CAAC;IAE/B,MAAM,CAACC,MAAM;AACf,CAAC"}