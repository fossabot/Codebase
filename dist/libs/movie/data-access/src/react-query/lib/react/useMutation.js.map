{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/react-query/lib/react/useMutation.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.useMutation = useMutation;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _notifyManager = require(\"../core/notifyManager\");\n\nvar _utils = require(\"../core/utils\");\n\nvar _mutationObserver = require(\"../core/mutationObserver\");\n\nvar _QueryClientProvider = require(\"./QueryClientProvider\");\n\nvar _utils2 = require(\"./utils\");\n\nfunction useMutation(arg1, arg2, arg3) {\n  var mountedRef = _react.default.useRef(false);\n\n  var _React$useState = _react.default.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var options = (0, _utils.parseMutationArgs)(arg1, arg2, arg3);\n  var queryClient = (0, _QueryClientProvider.useQueryClient)();\n\n  var obsRef = _react.default.useRef();\n\n  if (!obsRef.current) {\n    obsRef.current = new _mutationObserver.MutationObserver(queryClient, options);\n  } else {\n    obsRef.current.setOptions(options);\n  }\n\n  var currentResult = obsRef.current.getCurrentResult();\n\n  _react.default.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribe = obsRef.current.subscribe(_notifyManager.notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, []);\n\n  var mutate = _react.default.useCallback(function (variables, mutateOptions) {\n    obsRef.current.mutate(variables, mutateOptions).catch(_utils.noop);\n  }, []);\n\n  if (currentResult.error && (0, _utils2.shouldThrowError)(undefined, obsRef.current.options.useErrorBoundary, currentResult.error)) {\n    throw currentResult.error;\n  }\n\n  return (0, _extends2.default)({}, currentResult, {\n    mutate: mutate,\n    mutateAsync: currentResult.mutate\n  });\n}"],"names":["_interopRequireDefault","require","exports","__esModule","useMutation","_extends2","_react","_notifyManager","_utils","_mutationObserver","_QueryClientProvider","_utils2","arg1","arg2","arg3","mountedRef","default","useRef","_React$useState","useState","forceUpdate","options","parseMutationArgs","queryClient","useQueryClient","obsRef","current","MutationObserver","setOptions","currentResult","getCurrentResult","useEffect","unsubscribe","subscribe","notifyManager","batchCalls","x","mutate","useCallback","variables","mutateOptions","catch","noop","error","shouldThrowError","undefined","useErrorBoundary","mutateAsync"],"mappings":"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"}