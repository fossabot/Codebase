{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/broadcast-channel/src/methods/simulate.js"],"sourcesContent":["import {\n    microSeconds as micro,\n} from '../util';\n\nexport const microSeconds = micro;\n\nexport const type = 'simulate';\n\nconst SIMULATE_CHANNELS = new Set();\n\nexport function create(channelName) {\n    const state = {\n        name: channelName,\n        messagesCallback: null\n    };\n    SIMULATE_CHANNELS.add(state);\n\n    return state;\n}\n\nexport function close(channelState) {\n    SIMULATE_CHANNELS.delete(channelState);\n}\n\nexport function postMessage(channelState, messageJson) {\n    return new Promise(res => setTimeout(() => {\n        const channelArray = Array.from(SIMULATE_CHANNELS);\n        channelArray\n            .filter(channel => channel.name === channelState.name)\n            .filter(channel => channel !== channelState)\n            .filter(channel => !!channel.messagesCallback)\n            .forEach(channel => channel.messagesCallback(messageJson));\n        res();\n    }, 5));\n}\n\nexport function onMessage(channelState, fn) {\n    channelState.messagesCallback = fn;\n}\n\nexport function canBeUsed() {\n    return true;\n}\n\n\nexport function averageResponseTime() {\n    return 5;\n}\n\nexport default {\n    create,\n    close,\n    onMessage,\n    postMessage,\n    canBeUsed,\n    type,\n    averageResponseTime,\n    microSeconds\n};\n"],"names":["create","close","postMessage","onMessage","canBeUsed","averageResponseTime","microSeconds","micro","type","SIMULATE_CHANNELS","Set","channelName","state","name","messagesCallback","add","channelState","delete","messageJson","Promise","res","setTimeout","channelArray","Array","from","filter","channel","forEach","fn"],"mappings":";QAUgBA,MAAM,GAANA,MAAM;QAUNC,KAAK,GAALA,KAAK;QAILC,WAAW,GAAXA,WAAW;QAYXC,SAAS,GAATA,SAAS;QAITC,SAAS,GAATA,SAAS;QAKTC,mBAAmB,GAAnBA,mBAAmB;;AA3C5B,GAAS,CAAT,KAAS;AAET,KAAK,CAACC,YAAY,GAAGC,KAAK;QAApBD,YAAY,GAAZA,YAAY;AAElB,KAAK,CAACE,IAAI,GAAG,CAAU;QAAjBA,IAAI,GAAJA,IAAI;AAEjB,KAAK,CAACC,iBAAiB,GAAG,GAAG,CAACC,GAAG;SAEjBV,MAAM,CAACW,WAAW,EAAE,CAAC;IACjC,KAAK,CAACC,KAAK,GAAG,CAAC;QACXC,IAAI,EAAEF,WAAW;QACjBG,gBAAgB,EAAE,IAAI;IAC1B,CAAC;IACDL,iBAAiB,CAACM,GAAG,CAACH,KAAK;IAE3B,MAAM,CAACA,KAAK;AAChB,CAAC;SAEeX,KAAK,CAACe,YAAY,EAAE,CAAC;IACjCP,iBAAiB,CAACQ,MAAM,CAACD,YAAY;AACzC,CAAC;SAEed,WAAW,CAACc,YAAY,EAAEE,WAAW,EAAE,CAAC;IACpD,MAAM,CAAC,GAAG,CAACC,OAAO,EAACC,GAAG,GAAIC,UAAU,KAAO,CAAC;YACxC,KAAK,CAACC,YAAY,GAAGC,KAAK,CAACC,IAAI,CAACf,iBAAiB;YACjDa,YAAY,CACPG,MAAM,EAACC,OAAO,GAAIA,OAAO,CAACb,IAAI,KAAKG,YAAY,CAACH,IAAI;cACpDY,MAAM,EAACC,OAAO,GAAIA,OAAO,KAAKV,YAAY;cAC1CS,MAAM,EAACC,OAAO,KAAMA,OAAO,CAACZ,gBAAgB;cAC5Ca,OAAO,EAACD,OAAO,GAAIA,OAAO,CAACZ,gBAAgB,CAACI,WAAW;;YAC5DE,GAAG;QACP,CAAC,EAAE,CAAC;;AACR,CAAC;SAEejB,SAAS,CAACa,YAAY,EAAEY,EAAE,EAAE,CAAC;IACzCZ,YAAY,CAACF,gBAAgB,GAAGc,EAAE;AACtC,CAAC;SAEexB,SAAS,GAAG,CAAC;IACzB,MAAM,CAAC,IAAI;AACf,CAAC;SAGeC,mBAAmB,GAAG,CAAC;IACnC,MAAM,CAAC,CAAC;AACZ,CAAC;eAEc,CAAC;IACZL,MAAM;IACNC,KAAK;IACLE,SAAS;IACTD,WAAW;IACXE,SAAS;IACTI,IAAI;IACJH,mBAAmB;IACnBC,YAAY;AAChB,CAAC"}