"use strict";
!function r(o, i, s) {
    function a(t, e2) {
        if (!i[t]) {
            if (!o[t]) {
                var n = "function" == typeof require && require;
                if (!e2 && n) return n(t, !0);
                if (u) return u(t, !0);
                throw (n = new Error("Cannot find module '" + t + "'")).code = "MODULE_NOT_FOUND", n;
            }
            n = i[t] = {
                exports: {}
            }, o[t][0].call(n.exports, function(e) {
                return a(o[t][1][e] || e);
            }, n, n.exports, r, o, i, s);
        }
        return i[t].exports;
    }
    for(var u = "function" == typeof require && require, e1 = 0; e1 < s.length; e1++)a(s[e1]);
    return a;
}({
    1: [
        function(e3, t2, n1) {
            "use strict";
            Object.defineProperty(n1, "__esModule", {
                value: !0
            }), n1.clearNodeFolder = function(e) {
                e = (0, s.fillOptionsWithDefaults)(e);
                e = (0, i.chooseMethod)(e);
                return "node" === e.type ? e.clearNodeFolder().then(function() {
                    return !0;
                }) : Promise.resolve(!1);
            }, n1.enforceOptions = function(e) {
                r1 = e;
            }, n1.BroadcastChannel = void 0;
            var r1, o = e3("./util.js"), i = e3("./method-chooser.js"), s = e3("./options.js"), e3 = function(e4, t) {
                var n;
                this.name = e4, r1 && (t = r1), this.options = (0, s.fillOptionsWithDefaults)(t), this.method = (0, i.chooseMethod)(this.options), this._iL = !1, this._onML = null, this._addEL = {
                    message: [],
                    internal: []
                }, this._uMP = new Set, this._befC = [], this._prepP = null, t = (n = this).method.create(n.name, n.options), (0, o.isPromise)(t) ? (n._prepP = t).then(function(e) {
                    n._state = e;
                }) : n._state = t;
            };
            function a(t, e5, n) {
                var r = {
                    time: t.method.microSeconds(),
                    type: e5,
                    data: n
                };
                return (t._prepP || Promise.resolve()).then(function() {
                    var e = t.method.postMessage(t._state, r);
                    return t._uMP.add(e), e.catch().then(function() {
                        return t._uMP.delete(e);
                    }), e;
                });
            }
            function u(e) {
                return 0 < e._addEL.message.length || 0 < e._addEL.internal.length;
            }
            function c(e6, t3, n2) {
                e6._addEL[t3].push(n2), (function(e7) {
                    {
                        var t4, n;
                        !e7._iL && u(e7) && (t4 = function(t) {
                            e7._addEL[t.type].forEach(function(e) {
                                t.time >= e.time && e.fn(t.data);
                            });
                        }, n = e7.method.microSeconds(), e7._prepP ? e7._prepP.then(function() {
                            e7._iL = !0, e7.method.onMessage(e7._state, t4, n);
                        }) : (e7._iL = !0, e7.method.onMessage(e7._state, t4, n)));
                    }
                })(e6);
            }
            function l(e8, t6, n) {
                e8._addEL[t6] = e8._addEL[t6].filter(function(e) {
                    return e !== n;
                }), (function(e) {
                    {
                        var t;
                        e._iL && !u(e) && (e._iL = !1, t = e.method.microSeconds(), e.method.onMessage(e._state, null, t));
                    }
                })(e8);
            }
            (n1.BroadcastChannel = e3)._pubkey = !0, e3.prototype = {
                postMessage: function(e) {
                    if (this.closed) throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");
                    return a(this, "message", e);
                },
                postInternal: function(e) {
                    return a(this, "internal", e);
                },
                set onmessage (e){
                    var t1 = {
                        time: this.method.microSeconds(),
                        fn: e
                    };
                    l(this, "message", this._onML), e && "function" == typeof e ? (this._onML = t1, c(this, "message", t1)) : this._onML = null;
                },
                addEventListener: function(e, t) {
                    var n = this.method.microSeconds();
                    c(this, e, {
                        time: n,
                        fn: t
                    });
                },
                removeEventListener: function(e9, t) {
                    var n = this._addEL[e9].find(function(e) {
                        return e.fn === t;
                    });
                    l(this, e9, n);
                },
                close: function() {
                    var e10 = this;
                    if (!this.closed) {
                        this.closed = !0;
                        var t = this._prepP || Promise.resolve();
                        return this._onML = null, this._addEL.message = [], t.then(function() {
                            return Promise.all(Array.from(e10._uMP));
                        }).then(function() {
                            return Promise.all(e10._befC.map(function(e) {
                                return e();
                            }));
                        }).then(function() {
                            return e10.method.close(e10._state);
                        });
                    }
                },
                get type () {
                    return this.method.type;
                },
                get isClosed () {
                    return this.closed;
                }
            };
        },
        {
            "./method-chooser.js": 6,
            "./options.js": 11,
            "./util.js": 12
        }
    ],
    2: [
        function(e, t, n) {
            "use strict";
            var r = e("./index.es5.js"), e = r.BroadcastChannel, r = r.createLeaderElection;
            window.BroadcastChannel2 = e, window.createLeaderElection = r;
        },
        {
            "./index.es5.js": 3
        }
    ],
    3: [
        function(e, t, n) {
            "use strict";
            e = e("./index.js");
            t.exports = {
                BroadcastChannel: e.BroadcastChannel,
                createLeaderElection: e.createLeaderElection,
                clearNodeFolder: e.clearNodeFolder,
                enforceOptions: e.enforceOptions,
                beLeader: e.beLeader
            };
        },
        {
            "./index.js": 4
        }
    ],
    4: [
        function(e, t, n) {
            "use strict";
            Object.defineProperty(n, "__esModule", {
                value: !0
            }), Object.defineProperty(n, "BroadcastChannel", {
                enumerable: !0,
                get: function() {
                    return r.BroadcastChannel;
                }
            }), Object.defineProperty(n, "clearNodeFolder", {
                enumerable: !0,
                get: function() {
                    return r.clearNodeFolder;
                }
            }), Object.defineProperty(n, "enforceOptions", {
                enumerable: !0,
                get: function() {
                    return r.enforceOptions;
                }
            }), Object.defineProperty(n, "createLeaderElection", {
                enumerable: !0,
                get: function() {
                    return o.createLeaderElection;
                }
            }), Object.defineProperty(n, "beLeader", {
                enumerable: !0,
                get: function() {
                    return o.beLeader;
                }
            });
            var r = e("./broadcast-channel"), o = e("./leader-election");
        },
        {
            "./broadcast-channel": 1,
            "./leader-election": 5
        }
    ],
    5: [
        function(e11, t7, n3) {
            "use strict";
            var r2 = e11("@babel/runtime/helpers/interopRequireDefault");
            Object.defineProperty(n3, "__esModule", {
                value: !0
            }), n3.beLeader = u, n3.createLeaderElection = function(e12, t8) {
                if (e12._leaderElector) throw new Error("BroadcastChannel already has a leader-elector");
                t8 = (function(e, t) {
                    e = e || {};
                    (e = JSON.parse(JSON.stringify(e))).fallbackInterval || (e.fallbackInterval = 3000);
                    e.responseTime || (e.responseTime = t.method.averageResponseTime(t.options));
                    return e;
                })(t8, e12);
                var n = new s(e12, t8);
                return e12._befC.push(function() {
                    return n.die();
                }), e12._leaderElector = n;
            };
            var i1 = e11("./util.js"), o1 = r2(e11("unload")), s = function(e, t) {
                this._channel = e, this._options = t, this.isLeader = !1, this.isDead = !1, this.token = (0, i1.randomToken)(), this._isApl = !1, this._reApply = !1, this._unl = [], this._lstns = [], this._invs = [], this._dpL = function() {}, this._dpLC = !1;
            };
            function a(e, t) {
                t = {
                    context: "leader",
                    action: t,
                    token: e.token
                };
                return e._channel.postInternal(t);
            }
            function u(t) {
                t.isLeader = !0;
                var e13 = o1.default.add(function() {
                    return t.die();
                });
                t._unl.push(e13);
                e13 = function(e) {
                    "leader" === e.context && "apply" === e.action && a(t, "tell"), "leader" !== e.context || "tell" !== e.action || t._dpLC || (t._dpLC = !0, t._dpL(), a(t, "tell"));
                };
                return t._channel.addEventListener("internal", e13), t._lstns.push(e13), a(t, "tell");
            }
            s.prototype = {
                applyOnce: function() {
                    var t = this;
                    if (this.isLeader) return Promise.resolve(!1);
                    if (this.isDead) return Promise.resolve(!1);
                    if (this._isApl) return this._reApply = !0, Promise.resolve(!1);
                    function n(e) {
                        "leader" === e.context && e.token != t.token && (o.push(e), "apply" === e.action && e.token > t.token && (r = !0), "tell" === e.action && (r = !0));
                    }
                    var r = !(this._isApl = !0), o = [];
                    return this._channel.addEventListener("internal", n), a(this, "apply").then(function() {
                        return (0, i1.sleep)(t._options.responseTime);
                    }).then(function() {
                        return r ? Promise.reject(new Error) : a(t, "apply");
                    }).then(function() {
                        return (0, i1.sleep)(t._options.responseTime);
                    }).then(function() {
                        return r ? Promise.reject(new Error) : a(t);
                    }).then(function() {
                        return u(t);
                    }).then(function() {
                        return !0;
                    }).catch(function() {
                        return !1;
                    }).then(function(e) {
                        return t._channel.removeEventListener("internal", n), t._isApl = !1, !e && t._reApply ? (t._reApply = !1, t.applyOnce()) : e;
                    });
                },
                awaitLeadership: function() {
                    var i;
                    return this._aLP || (this._aLP = (i = this).isLeader ? Promise.resolve() : new Promise(function(e14) {
                        var t = !1;
                        function n() {
                            t || (t = !0, clearInterval(r), i._channel.removeEventListener("internal", o), e14(!0));
                        }
                        i.applyOnce().then(function() {
                            i.isLeader && n();
                        });
                        var r = setInterval(function() {
                            i.applyOnce().then(function() {
                                i.isLeader && n();
                            });
                        }, i._options.fallbackInterval);
                        i._invs.push(r);
                        var o = function(e) {
                            "leader" === e.context && "death" === e.action && i.applyOnce().then(function() {
                                i.isLeader && n();
                            });
                        };
                        i._channel.addEventListener("internal", o), i._lstns.push(o);
                    })), this._aLP;
                },
                set onduplicate (e){
                    this._dpL = e;
                },
                die: function() {
                    var t = this;
                    if (!this.isDead) return this.isDead = !0, this._lstns.forEach(function(e) {
                        return t._channel.removeEventListener("internal", e);
                    }), this._invs.forEach(function(e) {
                        return clearInterval(e);
                    }), this._unl.forEach(function(e) {
                        e.remove();
                    }), a(this, "death");
                }
            };
        },
        {
            "./util.js": 12,
            "@babel/runtime/helpers/interopRequireDefault": 13,
            unload: 19
        }
    ],
    6: [
        function(e15, t9, n4) {
            "use strict";
            var r = e15("@babel/runtime/helpers/interopRequireDefault");
            Object.defineProperty(n4, "__esModule", {
                value: !0
            }), n4.chooseMethod = function(t) {
                var e16 = [].concat(t.methods, u).filter(Boolean);
                if (t.type) {
                    if ("simulate" === t.type) return s.default;
                    var n = e16.find(function(e) {
                        return e.type === t.type;
                    });
                    if (n) return n;
                    throw new Error("method-type " + t.type + " not found");
                }
                t.webWorkerSupport || a.isNode || (e16 = e16.filter(function(e) {
                    return "idb" !== e.type;
                }));
                e16 = e16.find(function(e) {
                    return e.canBeUsed();
                });
                {
                    if (e16) return e16;
                    throw new Error("No useable methode found:" + JSON.stringify(u.map(function(e) {
                        return e.type;
                    })));
                }
            };
            var o = r(e15("./methods/native.js")), i = r(e15("./methods/indexed-db.js")), n4 = r(e15("./methods/localstorage.js")), s = r(e15("./methods/simulate.js")), a = e15("./util"), u = [
                o.default,
                i.default,
                n4.default
            ];
            !a.isNode || "function" == typeof (e15 = e15("../../src/methods/node.js")).canBeUsed && u.push(e15);
        },
        {
            "./methods/indexed-db.js": 7,
            "./methods/localstorage.js": 8,
            "./methods/native.js": 9,
            "./methods/simulate.js": 10,
            "./util": 12,
            "@babel/runtime/helpers/interopRequireDefault": 13
        }
    ],
    7: [
        function(e17, t10, n5) {
            "use strict";
            Object.defineProperty(n5, "__esModule", {
                value: !0
            }), n5.getIdb = u, n5.createDatabase = c, n5.writeMessage = l, n5.getAllMessages = function(e18) {
                var n = e18.transaction(a).objectStore(a), r = [];
                return new Promise(function(t) {
                    n.openCursor().onsuccess = function(e) {
                        e = e.target.result;
                        e ? (r.push(e.value), e.continue()) : t(r);
                    };
                });
            }, n5.getMessagesHigherThan = d, n5.removeMessageById = f, n5.getOldMessages = h, n5.cleanOldMessages = p, n5.create = m, n5.close = b, n5.postMessage = g, n5.onMessage = w, n5.canBeUsed = _, n5.averageResponseTime = y, n5.default = n5.type = n5.microSeconds = void 0;
            var o2 = e17("../util.js"), i2 = e17("oblivious-set"), s = e17("../options"), e17 = o2.microSeconds;
            n5.microSeconds = e17;
            var r3 = "pubkey.broadcast-channel-0-", a = "messages";
            function u() {
                if ("undefined" != typeof indexedDB) return indexedDB;
                if ("undefined" != typeof window) {
                    if (void 0 !== window.mozIndexedDB) return window.mozIndexedDB;
                    if (void 0 !== window.webkitIndexedDB) return window.webkitIndexedDB;
                    if (void 0 !== window.msIndexedDB) return window.msIndexedDB;
                }
                return !1;
            }
            function c(e19) {
                var n = u().open(r3 + e19, 1);
                return n.onupgradeneeded = function(e) {
                    e.target.result.createObjectStore(a, {
                        keyPath: "id",
                        autoIncrement: !0
                    });
                }, new Promise(function(e20, t) {
                    n.onerror = function(e) {
                        return t(e);
                    }, n.onsuccess = function() {
                        e20(n.result);
                    };
                });
            }
            function l(e21, t11, n) {
                var r = {
                    uuid: t11,
                    time: (new Date).getTime(),
                    data: n
                }, o = e21.transaction([
                    a
                ], "readwrite");
                return new Promise(function(e22, t) {
                    o.oncomplete = function() {
                        return e22();
                    }, o.onerror = function(e) {
                        return t(e);
                    }, o.objectStore(a).add(r);
                });
            }
            function d(e23, n) {
                var r = e23.transaction(a).objectStore(a), o = [];
                return new Promise(function(t) {
                    (function() {
                        try {
                            var e = IDBKeyRange.bound(n + 1, 1 / 0);
                            return r.openCursor(e);
                        } catch (e) {
                            return r.openCursor();
                        }
                    })().onsuccess = function(e) {
                        e = e.target.result;
                        e ? e.value.id < n + 1 ? e.continue(n + 1) : (o.push(e.value), e.continue()) : t(o);
                    };
                });
            }
            function f(e24, t) {
                var n = e24.transaction([
                    a
                ], "readwrite").objectStore(a).delete(t);
                return new Promise(function(e) {
                    n.onsuccess = function() {
                        return e();
                    };
                });
            }
            function h(e25, t12) {
                var r = (new Date).getTime() - t12, o = e25.transaction(a).objectStore(a), i = [];
                return new Promise(function(n) {
                    o.openCursor().onsuccess = function(e) {
                        var t, e = e.target.result;
                        e && (t = e.value).time < r ? (i.push(t), e.continue()) : n(i);
                    };
                });
            }
            function p(t, e26) {
                return h(t, e26).then(function(e27) {
                    return Promise.all(e27.map(function(e) {
                        return f(t, e.id);
                    }));
                });
            }
            function m(n, r) {
                return r = (0, s.fillOptionsWithDefaults)(r), c(n).then(function(e28) {
                    var t13 = {
                        closed: !1,
                        lastCursorId: 0,
                        channelName: n,
                        options: r,
                        uuid: (0, o2.randomToken)(),
                        eMIs: new i2.ObliviousSet(2 * r.idb.ttl),
                        writeBlockPromise: Promise.resolve(),
                        messagesCallback: null,
                        readQueuePromises: [],
                        db: e28
                    };
                    return e28.onclose = function() {
                        t13.closed = !0, r.idb.onclose && r.idb.onclose();
                    }, (function e(t) {
                        if (t.closed) return;
                        v(t).then(function() {
                            return (0, o2.sleep)(t.options.idb.fallbackInterval);
                        }).then(function() {
                            return e(t);
                        });
                    })(t13), t13;
                });
            }
            function v(n) {
                return !n.closed && n.messagesCallback ? d(n.db, n.lastCursorId).then(function(e29) {
                    return e29.filter(function(e) {
                        return !!e;
                    }).map(function(e) {
                        return e.id > n.lastCursorId && (n.lastCursorId = e.id), e;
                    }).filter(function(e) {
                        return t = n, (e = e).uuid !== t.uuid && !t.eMIs.has(e.id) && !(e.data.time < t.messagesCallbackTime);
                        var t;
                    }).sort(function(e, t) {
                        return e.time - t.time;
                    }).forEach(function(e) {
                        n.messagesCallback && (n.eMIs.add(e.id), n.messagesCallback(e.data));
                    }), Promise.resolve();
                }) : Promise.resolve();
            }
            function b(e) {
                e.closed = !0, e.db.close();
            }
            function g(e, t) {
                return e.writeBlockPromise = e.writeBlockPromise.then(function() {
                    return l(e.db, e.uuid, t);
                }).then(function() {
                    0 === (0, o2.randomInt)(0, 10) && p(e.db, e.options.idb.ttl);
                }), e.writeBlockPromise;
            }
            function w(e, t, n) {
                e.messagesCallbackTime = n, e.messagesCallback = t, v(e);
            }
            function _() {
                return !o2.isNode && !!u();
            }
            function y(e) {
                return 2 * e.idb.fallbackInterval;
            }
            n5.type = "idb", n5.default = {
                create: m,
                close: b,
                onMessage: w,
                postMessage: g,
                canBeUsed: _,
                type: "idb",
                averageResponseTime: y,
                microSeconds: e17
            };
        },
        {
            "../options": 11,
            "../util.js": 12,
            "oblivious-set": 16
        }
    ],
    8: [
        function(e30, t14, n6) {
            "use strict";
            Object.defineProperty(n6, "__esModule", {
                value: !0
            }), n6.getLocalStorage = u, n6.storageKey = c, n6.postMessage = l, n6.addStorageEventListener = d, n6.removeStorageEventListener = f, n6.create = h, n6.close = p, n6.onMessage = m, n6.canBeUsed = v, n6.averageResponseTime = b, n6.default = n6.type = n6.microSeconds = void 0;
            var i3 = e30("oblivious-set"), s = e30("../options"), a = e30("../util"), r4 = a.microSeconds;
            n6.microSeconds = r4;
            var o3 = "pubkey.broadcastChannel-", e30 = "localstorage";
            function u() {
                var e;
                if ("undefined" == typeof window) return null;
                try {
                    e = window.localStorage, e = window["ie8-eventlistener/storage"] || window.localStorage;
                } catch (e31) {}
                return e;
            }
            function c(e) {
                return o3 + e;
            }
            function l(o, i) {
                return new Promise(function(r) {
                    (0, a.sleep)().then(function() {
                        var e = c(o.channelName), t = {
                            token: (0, a.randomToken)(),
                            time: (new Date).getTime(),
                            data: i,
                            uuid: o.uuid
                        }, n = JSON.stringify(t);
                        u().setItem(e, n);
                        t = document.createEvent("Event");
                        t.initEvent("storage", !0, !0), t.key = e, t.newValue = n, window.dispatchEvent(t), r();
                    });
                });
            }
            function d(e32, t) {
                var n = o3 + e32, e32 = function(e) {
                    e.key === n && t(JSON.parse(e.newValue));
                };
                return window.addEventListener("storage", e32), e32;
            }
            function f(e) {
                window.removeEventListener("storage", e);
            }
            function h(e33, t) {
                if (t = (0, s.fillOptionsWithDefaults)(t), !v()) throw new Error("BroadcastChannel: localstorage cannot be used");
                var n = (0, a.randomToken)(), r = new i3.ObliviousSet(t.localstorage.removeTimeout), o = {
                    channelName: e33,
                    uuid: n,
                    eMIs: r
                };
                return o.listener = d(e33, function(e) {
                    o.messagesCallback && e.uuid !== n && e.token && !r.has(e.token) && (e.data.time && e.data.time < o.messagesCallbackTime || (r.add(e.token), o.messagesCallback(e.data)));
                }), o;
            }
            function p(e) {
                f(e.listener);
            }
            function m(e, t, n) {
                e.messagesCallbackTime = n, e.messagesCallback = t;
            }
            function v() {
                if (a.isNode) return !1;
                var e = u();
                if (!e) return !1;
                try {
                    var t = "__broadcastchannel_check";
                    e.setItem(t, "works"), e.removeItem(t);
                } catch (e34) {
                    return !1;
                }
                return !0;
            }
            function b() {
                var e = navigator.userAgent.toLowerCase();
                return e.includes("safari") && !e.includes("chrome") ? 240 : 120;
            }
            n6.type = e30, n6.default = {
                create: h,
                close: p,
                onMessage: m,
                postMessage: l,
                canBeUsed: v,
                type: e30,
                averageResponseTime: b,
                microSeconds: r4
            };
        },
        {
            "../options": 11,
            "../util": 12,
            "oblivious-set": 16
        }
    ],
    9: [
        function(e35, t15, n) {
            "use strict";
            Object.defineProperty(n, "__esModule", {
                value: !0
            }), n.create = o, n.close = i, n.postMessage = s, n.onMessage = a, n.canBeUsed = u, n.averageResponseTime = c, n.default = n.type = n.microSeconds = void 0;
            var r = e35("../util"), e35 = r.microSeconds;
            n.microSeconds = e35;
            function o(e36) {
                var t = {
                    messagesCallback: null,
                    bc: new BroadcastChannel(e36),
                    subFns: []
                };
                return t.bc.onmessage = function(e) {
                    t.messagesCallback && t.messagesCallback(e.data);
                }, t;
            }
            function i(e) {
                e.bc.close(), e.subFns = [];
            }
            function s(e, t) {
                try {
                    return e.bc.postMessage(t, !1), Promise.resolve();
                } catch (e37) {
                    return Promise.reject(e37);
                }
            }
            function a(e, t) {
                e.messagesCallback = t;
            }
            function u() {
                if (r.isNode && "undefined" == typeof window) return !1;
                if ("function" != typeof BroadcastChannel) return !1;
                if (BroadcastChannel._pubkey) throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");
                return !0;
            }
            function c() {
                return 150;
            }
            n.type = "native", n.default = {
                create: o,
                close: i,
                onMessage: a,
                postMessage: s,
                canBeUsed: u,
                type: "native",
                averageResponseTime: c,
                microSeconds: e35
            };
        },
        {
            "../util": 12
        }
    ],
    10: [
        function(e38, t16, n7) {
            "use strict";
            Object.defineProperty(n7, "__esModule", {
                value: !0
            }), n7.create = i, n7.close = s, n7.postMessage = a, n7.onMessage = u, n7.canBeUsed = c, n7.averageResponseTime = l, n7.default = n7.type = n7.microSeconds = void 0;
            var r = e38("../util").microSeconds;
            n7.microSeconds = r;
            e38 = "simulate";
            n7.type = e38;
            var o = new Set;
            function i(e) {
                e = {
                    name: e,
                    messagesCallback: null
                };
                return o.add(e), e;
            }
            function s(e) {
                o.delete(e);
            }
            function a(t, n) {
                return new Promise(function(e39) {
                    return setTimeout(function() {
                        Array.from(o).filter(function(e) {
                            return e.name === t.name;
                        }).filter(function(e) {
                            return e !== t;
                        }).filter(function(e) {
                            return !!e.messagesCallback;
                        }).forEach(function(e) {
                            return e.messagesCallback(n);
                        }), e39();
                    }, 5);
                });
            }
            function u(e, t) {
                e.messagesCallback = t;
            }
            function c() {
                return !0;
            }
            function l() {
                return 5;
            }
            n7.default = {
                create: i,
                close: s,
                onMessage: u,
                postMessage: a,
                canBeUsed: c,
                type: e38,
                averageResponseTime: l,
                microSeconds: r
            };
        },
        {
            "../util": 12
        }
    ],
    11: [
        function(e40, t17, n) {
            "use strict";
            Object.defineProperty(n, "__esModule", {
                value: !0
            }), n.fillOptionsWithDefaults = function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, t = JSON.parse(JSON.stringify(e));
                void 0 === t.webWorkerSupport && (t.webWorkerSupport = !0);
                t.idb || (t.idb = {});
                t.idb.ttl || (t.idb.ttl = 45000);
                t.idb.fallbackInterval || (t.idb.fallbackInterval = 150);
                e.idb && "function" == typeof e.idb.onclose && (t.idb.onclose = e.idb.onclose);
                t.localstorage || (t.localstorage = {});
                t.localstorage.removeTimeout || (t.localstorage.removeTimeout = 60000);
                e.methods && (t.methods = e.methods);
                t.node || (t.node = {});
                t.node.ttl || (t.node.ttl = 120000);
                void 0 === t.node.useFastPath && (t.node.useFastPath = !0);
                return t;
            };
        },
        {}
    ],
    12: [
        function(e41, t18, o) {
            !(function(r) {
                !(function() {
                    "use strict";
                    Object.defineProperty(o, "__esModule", {
                        value: !0
                    }), o.isPromise = function(e) {
                        return !(!e || "function" != typeof e.then);
                    }, o.sleep = function(t) {
                        t = t || 0;
                        return new Promise(function(e) {
                            return setTimeout(e, t);
                        });
                    }, o.randomInt = function(e, t) {
                        return Math.floor(Math.random() * (t - e + 1) + e);
                    }, o.randomToken = function() {
                        return Math.random().toString(36).substring(2);
                    }, o.microSeconds = function() {
                        var e = (new Date).getTime();
                        return e === t19 ? 1000 * e + ++n : (n = 0, 1000 * (t19 = e));
                    }, o.isNode = void 0;
                    var t19 = 0, n = 0;
                    var e42 = "[object process]" === Object.prototype.toString.call(void 0 !== r ? r : 0);
                    o.isNode = e42;
                }).call(this);
            }).call(this, e41("_process"));
        },
        {
            _process: 17
        }
    ],
    13: [
        function(e43, t, n) {
            t.exports = function(e) {
                return e && e.__esModule ? e : {
                    default: e
                };
            }, t.exports.default = t.exports, t.exports.__esModule = !0;
        },
        {}
    ],
    14: [
        function(e, t, n) {},
        {}
    ],
    15: [
        function(e, t, n) {
            t.exports = !1;
        },
        {}
    ],
    16: [
        function(e44, t20, n8) {
            "use strict";
            Object.defineProperty(n8, "__esModule", {
                value: !0
            }), n8.now = n8.removeTooOldValues = n8.ObliviousSet = void 0;
            var r5 = (o.prototype.has = function(e) {
                return this.set.has(e);
            }, o.prototype.add = function(e) {
                var t = this;
                this.timeMap.set(e, s()), this.set.add(e), setTimeout(function() {
                    i(t);
                }, 0);
            }, o.prototype.clear = function() {
                this.set.clear(), this.timeMap.clear();
            }, o);
            function o(e) {
                this.ttl = e, this.set = new Set, this.timeMap = new Map;
            }
            function i(e) {
                for(var t = s() - e.ttl, n = e.set[Symbol.iterator]();;){
                    var r = n.next().value;
                    if (!r) return;
                    if (!(e.timeMap.get(r) < t)) return;
                    e.timeMap.delete(r), e.set.delete(r);
                }
            }
            function s() {
                return (new Date).getTime();
            }
            n8.ObliviousSet = r5, n8.removeTooOldValues = i, n8.now = s;
        },
        {}
    ],
    17: [
        function(e46, t21, n9) {
            var r, o, t21 = t21.exports = {};
            function i() {
                throw new Error("setTimeout has not been defined");
            }
            function s() {
                throw new Error("clearTimeout has not been defined");
            }
            function a(t) {
                if (r === setTimeout) return setTimeout(t, 0);
                if ((r === i || !r) && setTimeout) return r = setTimeout, setTimeout(t, 0);
                try {
                    return r(t, 0);
                } catch (e) {
                    try {
                        return r.call(null, t, 0);
                    } catch (e) {
                        return r.call(this, t, 0);
                    }
                }
            }
            !function() {
                try {
                    r = "function" == typeof setTimeout ? setTimeout : i;
                } catch (e) {
                    r = i;
                }
                try {
                    o = "function" == typeof clearTimeout ? clearTimeout : s;
                } catch (e45) {
                    o = s;
                }
            }();
            var u, c = [], l = !1, d = -1;
            function f() {
                l && u && (l = !1, u.length ? c = u.concat(c) : d = -1, c.length && h());
            }
            function h() {
                if (!l) {
                    var e = a(f);
                    l = !0;
                    for(var t22 = c.length; t22;){
                        for(u = c, c = []; ++d < t22;)u && u[d].run();
                        d = -1, t22 = c.length;
                    }
                    u = null, l = !1, (function(t) {
                        if (o === clearTimeout) return clearTimeout(t);
                        if ((o === s || !o) && clearTimeout) return o = clearTimeout, clearTimeout(t);
                        try {
                            o(t);
                        } catch (e) {
                            try {
                                return o.call(null, t);
                            } catch (e) {
                                return o.call(this, t);
                            }
                        }
                    })(e);
                }
            }
            function p(e, t) {
                this.fun = e, this.array = t;
            }
            function m() {}
            t21.nextTick = function(e) {
                var t = new Array(arguments.length - 1);
                if (1 < arguments.length) for(var n = 1; n < arguments.length; n++)t[n - 1] = arguments[n];
                c.push(new p(e, t)), 1 !== c.length || l || a(h);
            }, p.prototype.run = function() {
                this.fun.apply(null, this.array);
            }, t21.title = "browser", t21.browser = !0, t21.env = {}, t21.argv = [], t21.version = "", t21.versions = {}, t21.on = m, t21.addListener = m, t21.once = m, t21.off = m, t21.removeListener = m, t21.removeAllListeners = m, t21.emit = m, t21.prependListener = m, t21.prependOnceListener = m, t21.listeners = function(e) {
                return [];
            }, t21.binding = function(e) {
                throw new Error("process.binding is not supported");
            }, t21.cwd = function() {
                return "/";
            }, t21.chdir = function(e) {
                throw new Error("process.chdir is not supported");
            }, t21.umask = function() {
                return 0;
            };
        },
        {}
    ],
    18: [
        function(e47, t, n) {
            "use strict";
            Object.defineProperty(n, "__esModule", {
                value: !0
            }), n.default = void 0, n.default = {
                add: function(e) {
                    "function" == typeof WorkerGlobalScope && self instanceof WorkerGlobalScope || "function" == typeof window.addEventListener && (window.addEventListener("beforeunload", function() {
                        e();
                    }, !0), window.addEventListener("unload", function() {
                        e();
                    }, !0));
                }
            };
        },
        {}
    ],
    19: [
        function(e48, t24, n) {
            "use strict";
            var r = e48("@babel/runtime/helpers/interopRequireDefault");
            Object.defineProperty(n, "__esModule", {
                value: !0
            }), n.add = c, n.runAll = l, n.removeAll = d, n.getSize = f, n.default = void 0;
            var o = r(e48("detect-node")), i = r(e48("./browser.js")), e48 = r(e48("./node.js")), s = (o.default ? e48 : i).default, a = new Set, u = !1;
            function c(e) {
                if (u || (u = !0, s.add(l)), "function" != typeof e) throw new Error("Listener is no function");
                return a.add(e), {
                    remove: function() {
                        return a.delete(e);
                    },
                    run: function() {
                        return a.delete(e), e();
                    }
                };
            }
            function l() {
                var t = [];
                return a.forEach(function(e) {
                    t.push(e()), a.delete(e);
                }), Promise.all(t);
            }
            function d() {
                a.clear();
            }
            function f() {
                return a.size;
            }
            n.default = {
                add: c,
                runAll: l,
                removeAll: d,
                getSize: f
            };
        },
        {
            "./browser.js": 18,
            "./node.js": 14,
            "@babel/runtime/helpers/interopRequireDefault": 13,
            "detect-node": 15
        }
    ]
}, {}, [
    2
]);

//# sourceMappingURL=browser.min.js.map