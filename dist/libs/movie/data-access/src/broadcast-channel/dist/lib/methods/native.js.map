{"version":3,"sources":["../../../../../../../../../libs/movie/data-access/node_modules/broadcast-channel/dist/lib/methods/native.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = create;\nexports.close = close;\nexports.postMessage = postMessage;\nexports.onMessage = onMessage;\nexports.canBeUsed = canBeUsed;\nexports.averageResponseTime = averageResponseTime;\nexports[\"default\"] = exports.type = exports.microSeconds = void 0;\n\nvar _util = require(\"../util\");\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'native';\nexports.type = type;\n\nfunction create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\n\nfunction close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\n\nfunction postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return Promise.resolve();\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\n\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (_util.isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\n\nfunction averageResponseTime() {\n  return 150;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;"],"names":["Object","defineProperty","exports","value","create","close","postMessage","onMessage","canBeUsed","averageResponseTime","type","microSeconds","_util","require","channelName","state","messagesCallback","bc","BroadcastChannel","subFns","onmessage","msg","data","channelState","messageJson","Promise","resolve","err","reject","fn","isNode","window","_pubkey","Error","_default"],"mappings":"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"}