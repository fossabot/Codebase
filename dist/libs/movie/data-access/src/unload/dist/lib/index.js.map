{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/unload/dist/lib/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.add = add;\nexports.runAll = runAll;\nexports.removeAll = removeAll;\nexports.getSize = getSize;\nexports[\"default\"] = void 0;\n\nvar _detectNode = _interopRequireDefault(require(\"detect-node\"));\n\nvar _browser = _interopRequireDefault(require(\"./browser.js\"));\n\nvar _node = _interopRequireDefault(require(\"./node.js\"));\n\nvar USE_METHOD = _detectNode[\"default\"] ? _node[\"default\"] : _browser[\"default\"];\nvar LISTENERS = new Set();\nvar startedListening = false;\n\nfunction startListening() {\n  if (startedListening) return;\n  startedListening = true;\n  USE_METHOD.add(runAll);\n}\n\nfunction add(fn) {\n  startListening();\n  if (typeof fn !== 'function') throw new Error('Listener is no function');\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\n\nfunction runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\n\nfunction removeAll() {\n  LISTENERS.clear();\n}\n\nfunction getSize() {\n  return LISTENERS.size;\n}\n\nvar _default = {\n  add: add,\n  runAll: runAll,\n  removeAll: removeAll,\n  getSize: getSize\n};\nexports[\"default\"] = _default;"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","add","runAll","removeAll","getSize","_detectNode","_browser","_node","USE_METHOD","LISTENERS","Set","startedListening","startListening","fn","Error","addReturn","remove","run","promises","forEach","push","Promise","all","clear","size","_default"],"mappings":"AAAA,CAAY;AAEZ,GAAG,CAACA,sBAAsB,GAAGC,OAAO,CAAC,CAA8C;AAEnFC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,CAAY,aAAE,CAAC;IAC5CC,KAAK,EAAE,IAAI;AACb,CAAC;AACDD,OAAO,CAACE,GAAG,GAAGA,GAAG;AACjBF,OAAO,CAACG,MAAM,GAAGA,MAAM;AACvBH,OAAO,CAACI,SAAS,GAAGA,SAAS;AAC7BJ,OAAO,CAACK,OAAO,GAAGA,OAAO;AACzBL,OAAO,CAAC,CAAS,YAAI,IAAI,CAAC,CAAC;AAE3B,GAAG,CAACM,WAAW,GAAGV,sBAAsB,CAACC,OAAO,CAAC,CAAa;AAE9D,GAAG,CAACU,QAAQ,GAAGX,sBAAsB,CAACC,OAAO,CAAC,CAAc;AAE5D,GAAG,CAACW,KAAK,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,CAAW;AAEtD,GAAG,CAACY,UAAU,GAAGH,WAAW,CAAC,CAAS,YAAIE,KAAK,CAAC,CAAS,YAAID,QAAQ,CAAC,CAAS;AAC/E,GAAG,CAACG,SAAS,GAAG,GAAG,CAACC,GAAG;AACvB,GAAG,CAACC,gBAAgB,GAAG,KAAK;SAEnBC,cAAc,GAAG,CAAC;IACzB,EAAE,EAAED,gBAAgB,EAAE,MAAM;IAC5BA,gBAAgB,GAAG,IAAI;IACvBH,UAAU,CAACP,GAAG,CAACC,MAAM;AACvB,CAAC;SAEQD,GAAG,CAACY,EAAE,EAAE,CAAC;IAChBD,cAAc;IACd,EAAE,EAAE,MAAM,CAACC,EAAE,KAAK,CAAU,WAAE,KAAK,CAAC,GAAG,CAACC,KAAK,CAAC,CAAyB;IACvEL,SAAS,CAACR,GAAG,CAACY,EAAE;IAChB,GAAG,CAACE,SAAS,GAAG,CAAC;QACfC,MAAM,EAAE,QAAQ,CAACA,MAAM,GAAG,CAAC;YACzB,MAAM,CAACP,SAAS,CAAC,CAAQ,SAAEI,EAAE;QAC/B,CAAC;QACDI,GAAG,EAAE,QAAQ,CAACA,GAAG,GAAG,CAAC;YACnBR,SAAS,CAAC,CAAQ,SAAEI,EAAE;YACtB,MAAM,CAACA,EAAE;QACX,CAAC;IACH,CAAC;IACD,MAAM,CAACE,SAAS;AAClB,CAAC;SAEQb,MAAM,GAAG,CAAC;IACjB,GAAG,CAACgB,QAAQ,GAAG,CAAC,CAAC;IACjBT,SAAS,CAACU,OAAO,CAAC,QAAQ,CAAEN,EAAE,EAAE,CAAC;QAC/BK,QAAQ,CAACE,IAAI,CAACP,EAAE;QAChBJ,SAAS,CAAC,CAAQ,SAAEI,EAAE;IACxB,CAAC;IACD,MAAM,CAACQ,OAAO,CAACC,GAAG,CAACJ,QAAQ;AAC7B,CAAC;SAEQf,SAAS,GAAG,CAAC;IACpBM,SAAS,CAACc,KAAK;AACjB,CAAC;SAEQnB,OAAO,GAAG,CAAC;IAClB,MAAM,CAACK,SAAS,CAACe,IAAI;AACvB,CAAC;AAED,GAAG,CAACC,QAAQ,GAAG,CAAC;IACdxB,GAAG,EAAEA,GAAG;IACRC,MAAM,EAAEA,MAAM;IACdC,SAAS,EAAEA,SAAS;IACpBC,OAAO,EAAEA,OAAO;AAClB,CAAC;AACDL,OAAO,CAAC,CAAS,YAAI0B,QAAQ"}