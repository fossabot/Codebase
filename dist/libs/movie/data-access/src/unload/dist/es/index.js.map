{"version":3,"sources":["../../../../../../../../libs/movie/data-access/node_modules/unload/dist/es/index.js"],"sourcesContent":["import isNode from 'detect-node';\nimport BrowserMethod from './browser.js';\nimport NodeMethod from './node.js';\nvar USE_METHOD = isNode ? NodeMethod : BrowserMethod;\nvar LISTENERS = new Set();\nvar startedListening = false;\n\nfunction startListening() {\n  if (startedListening) return;\n  startedListening = true;\n  USE_METHOD.add(runAll);\n}\n\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') throw new Error('Listener is no function');\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}\nexport default {\n  add: add,\n  runAll: runAll,\n  removeAll: removeAll,\n  getSize: getSize\n};"],"names":["add","runAll","removeAll","getSize","USE_METHOD","isNode","NodeMethod","BrowserMethod","LISTENERS","Set","startedListening","startListening","fn","Error","addReturn","remove","run","promises","forEach","push","Promise","all","clear","size"],"mappings":";QAagBA,GAAG,GAAHA,GAAG;QAeHC,MAAM,GAANA,MAAM;QAQNC,SAAS,GAATA,SAAS;QAGTC,OAAO,GAAPA,OAAO;;AAvCJ,GAAa,CAAb,WAAa;AACN,GAAc,CAAd,UAAc;AACjB,GAAW,CAAX,OAAW;AAClC,GAAG,CAACC,UAAU,GAAGC,WAAM,WAAGC,OAAU,WAAGC,UAAa;AACpD,GAAG,CAACC,SAAS,GAAG,GAAG,CAACC,GAAG;AACvB,GAAG,CAACC,gBAAgB,GAAG,KAAK;SAEnBC,cAAc,GAAG,CAAC;IACzB,EAAE,EAAED,gBAAgB,EAAE,MAAM;IAC5BA,gBAAgB,GAAG,IAAI;IACvBN,UAAU,CAACJ,GAAG,CAACC,MAAM;AACvB,CAAC;SAEeD,GAAG,CAACY,EAAE,EAAE,CAAC;IACvBD,cAAc;IACd,EAAE,EAAE,MAAM,CAACC,EAAE,KAAK,CAAU,WAAE,KAAK,CAAC,GAAG,CAACC,KAAK,CAAC,CAAyB;IACvEL,SAAS,CAACR,GAAG,CAACY,EAAE;IAChB,GAAG,CAACE,SAAS,GAAG,CAAC;QACfC,MAAM,EAAE,QAAQ,CAACA,MAAM,GAAG,CAAC;YACzB,MAAM,CAACP,SAAS,CAAC,CAAQ,SAAEI,EAAE;QAC/B,CAAC;QACDI,GAAG,EAAE,QAAQ,CAACA,GAAG,GAAG,CAAC;YACnBR,SAAS,CAAC,CAAQ,SAAEI,EAAE;YACtB,MAAM,CAACA,EAAE;QACX,CAAC;IACH,CAAC;IACD,MAAM,CAACE,SAAS;AAClB,CAAC;SACeb,MAAM,GAAG,CAAC;IACxB,GAAG,CAACgB,QAAQ,GAAG,CAAC,CAAC;IACjBT,SAAS,CAACU,OAAO,CAAC,QAAQ,CAAEN,EAAE,EAAE,CAAC;QAC/BK,QAAQ,CAACE,IAAI,CAACP,EAAE;QAChBJ,SAAS,CAAC,CAAQ,SAAEI,EAAE;IACxB,CAAC;IACD,MAAM,CAACQ,OAAO,CAACC,GAAG,CAACJ,QAAQ;AAC7B,CAAC;SACef,SAAS,GAAG,CAAC;IAC3BM,SAAS,CAACc,KAAK;AACjB,CAAC;SACenB,OAAO,GAAG,CAAC;IACzB,MAAM,CAACK,SAAS,CAACe,IAAI;AACvB,CAAC;eACc,CAAC;IACdvB,GAAG,EAAEA,GAAG;IACRC,MAAM,EAAEA,MAAM;IACdC,SAAS,EAAEA,SAAS;IACpBC,OAAO,EAAEA,OAAO;AAClB,CAAC"}